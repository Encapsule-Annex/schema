(function(){(function(){var e=this;var t;if(typeof require=="function"){try{var n=require("crypto").randomBytes;t=n&&function(){return n(16)}}catch(s){}}if(!t&&e.crypto&&crypto.getRandomValues){var i=new Uint8Array(16);t=function k(){crypto.getRandomValues(i);return i}}if(!t){var a=new Array(16);t=function(){for(var e=0,t;e<16;e++){if((e&3)===0)t=Math.random()*4294967296;a[e]=t>>>((e&3)<<3)&255}return a}}var o=typeof Buffer=="function"?Buffer:Array;var r=[];var l={};for(var c=0;c<256;c++){r[c]=(c+256).toString(16).substr(1);l[r[c]]=c}function d(e,t,n){var s=t&&n||0,i=0;t=t||[];e.toLowerCase().replace(/[0-9a-f]{2}/g,function(e){if(i<16){t[s+i++]=l[e]}});while(i<16){t[s+i++]=0}return t}function p(e,t){var n=t||0,s=r;return s[e[n++]]+s[e[n++]]+s[e[n++]]+s[e[n++]]+"-"+s[e[n++]]+s[e[n++]]+"-"+s[e[n++]]+s[e[n++]]+"-"+s[e[n++]]+s[e[n++]]+"-"+s[e[n++]]+s[e[n++]]+s[e[n++]]+s[e[n++]]+s[e[n++]]+s[e[n++]]}var u=t();var h=[u[0]|1,u[1],u[2],u[3],u[4],u[5]];var m=(u[6]<<8|u[7])&16383;var b=0,f=0;function v(e,t,n){var s=t&&n||0;var i=t||[];e=e||{};var a=e.clockseq!=null?e.clockseq:m;var o=e.msecs!=null?e.msecs:(new Date).getTime();var r=e.nsecs!=null?e.nsecs:f+1;var l=o-b+(r-f)/1e4;if(l<0&&e.clockseq==null){a=a+1&16383}if((l<0||o>b)&&e.nsecs==null){r=0}if(r>=1e4){throw new Error("uuid.v1(): Can't create more than 10M uuids/sec")}b=o;f=r;m=a;o+=122192928e5;var c=((o&268435455)*1e4+r)%4294967296;i[s++]=c>>>24&255;i[s++]=c>>>16&255;i[s++]=c>>>8&255;i[s++]=c&255;var d=o/4294967296*1e4&268435455;i[s++]=d>>>8&255;i[s++]=d&255;i[s++]=d>>>24&15|16;i[s++]=d>>>16&255;i[s++]=a>>>8|128;i[s++]=a&255;var u=e.node||h;for(var v=0;v<6;v++){i[s+v]=u[v]}return t?t:p(i)}function w(e,n,s){var i=n&&s||0;if(typeof e=="string"){n=e=="binary"?new o(16):null;e=null}e=e||{};var a=e.random||(e.rng||t)();a[6]=a[6]&15|64;a[8]=a[8]&63|128;if(n){for(var r=0;r<16;r++){n[i+r]=a[r]}}return n||p(a)}var g=w;g.v1=v;g.v4=w;g.parse=d;g.unparse=p;g.BufferClass=o;if(e.define&&define.amd){define(function(){return g})}else if(typeof module!="undefined"&&module.exports){module.exports=g}else{var M=e.uuid;g.noConflict=function(){e.uuid=M;return g};e.uuid=g}}).call(this);(function(){var e,t,n=function(e,t){return function(){return e.apply(t,arguments)}},s={}.hasOwnProperty,i=function(e,t){for(var n in t){if(s.call(t,n))e[n]=t[n]}function i(){this.constructor=e}i.prototype=t.prototype;e.prototype=new i;e.__super__=t.prototype;return e};t=typeof Encapsule!=="undefined"&&Encapsule!==null&&Encapsule||(this.Encapsule={});Encapsule.code=Encapsule.code!=null&&Encapsule.code||(this.Encapsule.code={});Encapsule.code.lib=Encapsule.code.lib!=null&&Encapsule.code.lib||(this.Encapsule.code.lib={});Encapsule.code.lib.js=Encapsule.code.lib.js!=null&&Encapsule.code.lib.js||(this.Encapsule.code.lib.js={});Encapsule.code.lib.util=Encapsule.code.lib.util!=null&&Encapsule.code.lib.util||(this.Encapsule.code.lib.util={});Encapsule.code.lib.js.clone=function(e){var t,n,s;try{if(!(e!=null)||typeof e!=="object"){return e}if(e instanceof Date){return new Date(e.getTime())}if(e instanceof RegExp){t="";if(e.global!=null){t+="g"}if(e.ignoreCase!=null){t+="i"}if(e.multiline!=null){t+="m"}if(e.sticky!=null){t+="y"}return new RegExp(e.source,t)}s=new e.constructor;for(n in e){s[n]=Encapsule.code.lib.js.clone(e[n])}return s}catch(i){throw"Encapsule.code.lib.js.clone: "+i}};Encapsule.code.lib.js.dictionaryLength=function(e){try{return Object.keys(e).length}catch(t){throw"Encapsule.code.lib.js.dictionaryLength: "+t}};Encapsule.code.lib.util.uuidNull="00000000-0000-0000-0000-000000000000";Encapsule.code.lib.util.getEpochTime=function(){return Math.round((new Date).getTime()/1e3)};t=typeof Encapsule!=="undefined"&&Encapsule!==null&&Encapsule||(this.Encapsule={});Encapsule.code=Encapsule.code!=null&&Encapsule.code||(this.Encapsule.code={});Encapsule.code.lib=Encapsule.code.lib!=null&&Encapsule.code.lib||(this.Encapsule.code.lib={});Encapsule.code.lib.base=Encapsule.code.lib.base!=null&&Encapsule.code.lib.base||(this.Encapsule.code.lib.base={});Encapsule.code.lib.base.BackChannel=function(){function e(e,t){var n=this;try{this.logHandler=e;this.errorHandler=t;this.log=function(e){try{if(n.logHandler!=null&&n.logHandler){try{n.logHandler(e)}catch(t){throw"Error executing log handler function callback: "+t}return true}return false}catch(t){throw"Encapsule.code.lib.base.BackChannel.log failure: "+t}};this.error=function(e){try{if(n.errorHandler!=null&&n.errorHandler){try{n.errorHandler(e)}catch(t){throw"Error executing error handler function callback: "+t}return true}throw e}catch(t){throw"Encapsule.code.lib.base.BackChannel.error failure: "+t}}}catch(s){throw"Encapsule.code.lib.base.BackChannel failure: "+s}}return e}();t=typeof Encapsule!=="undefined"&&Encapsule!==null&&Encapsule||(this.Encapsule={});Encapsule.code=Encapsule.code!=null&&Encapsule.code||(this.Encapsule.code={});Encapsule.code.lib=Encapsule.code.lib!=null&&Encapsule.code.lib||(this.Encapsule.code.lib={});Encapsule.code.lib.onm=Encapsule.code.lib.onm!=null&&Encapsule.code.lib.onm||(this.Encapsule.code.lib.onm={});e=Encapsule.code.lib.onm;e.implementation=e.implementation!=null&&e.implementation||(e.implementation={});e.implementation.ModelDetails=function(){function t(t,n){var s,i=this;try{this.model=t!=null&&t||function(){throw"Internal error missing model input parameter."}();s=function(e,t,n,a,o,r){var l,c,d,p,u,h,m,b,f,v,w,g,M,k,E,y,N,S,A;try{if(!(e!=null&&e)){throw"Missing object model layout object input parameter! If you specified the namespace declaration via object reference, check the validity of the reference."}if(!(e.jsonTag!=null&&e.jsonTag)){throw"Missing required namespace declaration property 'jsonTag'."}k=e.jsonTag!=null&&e.jsonTag||function(){throw"Namespace declaration missing required `jsonTag` property."}();v=t!=null&&t&&""+t+"."+k||k;u=e.____label!=null&&e.____label||e.jsonTag;d=e.____description!=null&&e.____description||"no description provided";p=i.countDescriptors++;m=e.namespaceType!=null&&e.namespaceType||!p&&(e.namespaceType="root")||function(){throw"Internal error unable to determine namespace type."}();f=void 0;if(r!=null&&r){f=Encapsule.code.lib.js.clone(r)}else{f=[]}h=e.namespaceProperties!=null&&e.namespaceProperties||{};E=i.objectModelDescriptorById[p]={archetypePathId:-1,children:[],componentNamespaceIds:[],description:d,extensionPointReferenceIds:[],id:p,idComponent:p,isComponent:false,jsonTag:k,label:u,namespaceType:m,namespaceModelDeclaration:e,namespaceModelPropertiesDeclaration:h,parent:n,parentPathExtensionPoints:f,parentPathIdVector:[],path:v};i.objectModelPathMap[v]=E;if(n!=null&&n){n.children.push(E);E.parentPathIdVector=Encapsule.code.lib.js.clone(n.parentPathIdVector);E.parentPathIdVector.push(n.id)}if(i.rankMax<E.parentPathIdVector.length){i.rankMax=E.parentPathIdVector.length}c=void 0;switch(m){case"extensionPoint":if(!(a!=null&&a)){throw"Internal error: componentDescriptor_ should be defined."}E.idComponent=a.id;c=a;c.extensionPoints[v]=E;g=void 0;l=void 0;if(e.componentArchetype!=null&&e.componentArchetype){g=true;l=e.componentArchetype}else if(e.componentArchetypePath!=null&&e.componentArchetypePath){g=false;w=e.componentArchetypePath;b=i.objectModelPathMap[w];if(!(b!=null&&b)){throw"Extension point namespace '"+v+"' component archetype '"+w+"' was not found and is invalid."}if(b.namespaceType!=="component"){throw"Extension point namespace '"+v+"' declares component archetype '"+w+"' which is not a 'component' namespace type."}b.extensionPointReferenceIds.push(E.id);E.archetypePathId=b.id;i.countExtensionReferences++}else{throw"Cannot process extension point declaration because its corresponding extension archetype is missing from the object model declaration."}y=Encapsule.code.lib.js.clone(f);y.push(p);i.countExtensionPoints++;if(g){s(l,v,E,c,E.parentPathIdVector,y)}break;case"component":E.isComponent=true;E.extensionPoints={};n.archetypePathId=p;c=E;i.countExtensions++;i.countComponents++;break;case"root":if(a!=null||c){throw"Internal error: componentDescriptor_ should be undefined."}E.isComponent=true;E.extensionPoints={};c=E;i.countComponents++;break;case"child":if(!(a!=null&&a)){throw"Internal error: componentDescriptor_ should be defined."}E.idComponent=a.id;c=a;i.countChildren++;break;default:throw"Unrecognized namespace type '"+m+"' in object model namespace declaration."}i.objectModelDescriptorById[E.idComponent].componentNamespaceIds.push(E.id);if(!(e.subNamespaces!=null&&e.subNamespaces)){return true}A=e.subNamespaces;for(N=0,S=A.length;N<S;N++){M=A[N];s(M,v,E,c,E.parentPathIdVector,f)}return true}catch(O){throw"ONMjs.implementation.ModelDetails.buildOMDescriptorFromLayout fail: "+O}};this.getNamespaceDescriptorFromPathId=function(e){var t;try{if(!(e!=null)){throw"Missing path ID parameter!"}if(e<0||e>=i.objectModelDescriptorById.length){throw"Out of range path ID '"+e+" cannot be resolved."}t=i.objectModelDescriptorById[e];if(!(t!=null&&t)){throw"Internal error getting namespace descriptor for path ID="+e+"!"}return t}catch(n){throw"ONMjs.implementation.ModelDetails.getNamespaceDescriptorFromPathId failure: "+n}};this.getNamespaceDescriptorFromPath=function(e){try{return i.getNamespaceDescriptorFromPathId(i.getPathIdFromPath(e))}catch(t){throw"ONMjs.implementation.ModelDetails.getNamespaceDescriptorFromPath failure: "+t}};this.getPathIdFromPath=function(e){var t,n;try{if(!(e!=null&&e)){throw"Missing object model path parameter!"}t=i.objectModelPathMap[e];if(!(t!=null&&t)){throw"Path '"+e+"' is not in the '"+i.model.jsonTag+"' model's address space."}n=t.id;if(!(n!=null)){throw"Internal error: Invalid object model descriptor doesn't support id property for path '"+objectModelPath_+"."}return n}catch(s){throw"ONMjs.implementation.ModelDetails.getPathIdFromPath fail: "+s}};this.getPathFromPathId=function(e){var t,n;try{t=i.getNamespaceDescriptorFromPathId(e);if(!(t!=null&&t)){throw"Internal error: Can't find object descriptor for valid path ID '"+e+"."}n=t.path;if(!(n!=null&&n)){throw"Internal error: Invalid object model descriptor doesn't support path property for path '"+objectModelPath_+"."}return n}catch(s){throw"ONMjs.implementation.ModelDetails.getPathFromPathId fail: "+s}};this.createAddressFromPathId=function(t){var n,s,i,a,o,r,l,c;try{if(!(t!=null)){throw"Missing path input parameter."}o=this.getNamespaceDescriptorFromPathId(t);s=new e.Address(this.model);r=void 0;a=Encapsule.code.lib.js.clone(o.parentPathIdVector);a.push(o.id);for(l=0,c=a.length;l<c;l++){i=a[l];n=this.getNamespaceDescriptorFromPathId(i);if(n.namespaceType==="component"){s.implementation.pushToken(r)}r=new e.implementation.AddressToken(this.model,n.idExtensionPoint,void 0,n.id)}s.implementation.pushToken(r);return s}catch(d){throw"ONMjs.implementation.ModelDetails.getAddressFromPathId failure: "+d}};if(!(n!=null&&n)){throw"Missing object model delcaration input parameter!"}if(!(n.jsonTag!=null&&n.jsonTag)){throw"Missing required root namespace property 'jsonTag'."}this.model.jsonTag=n.jsonTag;this.model.label=n.____label!=null&&n.____label||n.jsonTag;this.model.description=n.____description!=null&&n.____description||"<no description provided>";this.objectModelDeclaration=Encapsule.code.lib.js.clone(n);Object.freeze(this.objectModelDeclaration);if(!(this.objectModelDeclaration!=null&&this.objectModelDeclaration)){throw"Failed to deep copy (clone) source object model declaration."}this.objectModelPathMap={};this.objectModelDescriptorById=[];this.countDescriptors=0;this.countComponents=0;this.countExtensionPoints=0;this.countExtensions=0;this.countExtensionReferences=0;this.countChildren=0;this.rankMax=0;s(n);if(this.countExtensionPoints!==this.countExtensions+this.countExtensionReferences){throw"Layout declaration error: extension point and extension descriptor counts do not match. countExtensionPoints="+this.countExtensionPoints+" countExtensions="+this.countExtensions}if(this.countComponents!==this.countExtensionPoints+1-this.countExtensionReferences){throw"Layout declaration error: component count should be "+("extension count + 1 - extension references. componentCount="+this.countComponents+" ")+(" countExtensions="+this.countExtensions+" extensionReferences="+this.countExtensionReferences)}Object.freeze(this.objectModelPathMap);Object.freeze(this.objectModelDescriptorById);this.semanticBindings=this.objectModelDeclaration.semanticBindings!=null&&this.objectModelDeclaration.semanticBindings||{};this.componentKeyGenerator=this.semanticBindings.componentKeyGenerator!=null&&this.semanticBindings.componentKeyGenerator||"external";this.namespaceVersioning=this.semanticBindings.namespaceVersioning!=null&&this.semanticBindings.namespaceVersioning||"disabled";switch(this.componentKeyGenerator){case"disabled":if(this.semanticBindings.getUniqueKey!=null&&this.semanticBindings.getUniqueKey){delete this.semanticBindings.getUniqueKey}if(this.semanticBindings.setUniqueKey!=null&&this.semanticBindings.setUniqueKey){delete this.semanticBindings.setUniqueKey}break;case"internalLuid":this.semanticBindings.getUniqueKey=function(e){return e.key};this.semanticBindings.setUniqueKey=function(t){t.key=e.implementation.LUID!=null&&e.implementation.LUID||(e.implementation.LUID=1);e.implementation.LUID++;return t.key};break;case"internalUuid":this.semanticBindings.getUniqueKey=function(e){return e.key};this.semanticBindings.setUniqueKey=function(e){return e.key=uuid.v4()};break;case"external":break;default:throw"Unrecognized componentKeyGenerator='"+this.componentKeyGenerator+"'"}switch(this.namespaceVersioning){case"disabled":if(this.semanticBindings.update!=null&&this.semanticBindings.update){delete this.semanticBindings.update}break;case"internalSimple":this.semanticBindings.update=function(e){if(e.revision!=null){return e.revision++}};break;case"internalAdvanced":this.semanticBindings.update=function(e){if(e.revision!=null){e.revision++}if(e.uuidRevision!=null){e.uuidRevision=uuid.v4()}if(e.revisionTime!=null){return e.revisionTime=Encapsule.code.lib.util.getEpochTime()}};break;default:throw"Unrecognized namespaceVersionion=`"+this.namespaceUpdateRevision+"'"}}catch(a){throw"ONMjs.implementation.ModelDetails failure: "+a}}return t}();e.Model=function(){function t(t){var n=this;try{this.implementation=new e.implementation.ModelDetails(this,t);this.createRootAddress=function(){try{return new e.Address(n,[new e.implementation.AddressToken(n,void 0,void 0,0)])}catch(t){throw"ONMjs.Model.getRootAddress failure: "+t}};this.createPathAddress=function(e){var t,s;try{s=n.implementation.getPathIdFromPath(e);t=n.implementation.createAddressFromPathId(s);return t}catch(i){throw"ONMjs.Model.getAddressFromPath failure: "+i}};this.getSemanticBindings=function(){try{return n.implementation.semanticBindings}catch(e){throw"ONMjs.Model.getSemanticBindings failure: "+e}};this.isEqual=function(e){try{return n.jsonTag===e.jsonTag}catch(t){throw"ONMjs.Model.isEqual failure: "+t}}}catch(s){throw"ONMjs.Model construction fail: "+s}}return t}();t=typeof Encapsule!=="undefined"&&Encapsule!==null&&Encapsule||(this.Encapsule={});Encapsule.code=Encapsule.code!=null&&Encapsule.code||(this.Encapsule.code={});Encapsule.code.lib=Encapsule.code.lib!=null&&Encapsule.code.lib||(this.Encapsule.code.lib={});Encapsule.code.lib.onm=Encapsule.code.lib.onm!=null&&Encapsule.code.lib.onm||(this.Encapsule.code.lib.onm={});e=Encapsule.code.lib.onm;e.implementation=e.implementation!=null&&e.implementation||(e.implementation={});e.implementation.AddressDetails=function(){function t(t,n,s){var i,a,o,r,l=this;try{this.address=t!=null&&t||function(){throw"Internal error missing address input parameter."}();this.model=n!=null&&n||function(){throw"Internal error missing model input paramter."}();this.getModelPath=function(){var e;try{if(!l.tokenVector.length){throw"Invalid address contains no address tokens."}e=l.getLastToken();return e.namespaceDescriptor.path}catch(t){throw"ONMjs.implementation.AddressDetails.getModelPathFromAddress failure: "+t}};this.getModelDescriptorFromSubpath=function(e){var t;try{t=""+l.getModelPath()+"."+e;return l.model.implementation.getNamespaceDescriptorFromPath(t)}catch(n){throw"ONMjs.implementation.AddressDetails.getModelDescriptorFromSubpath failure: "+n}};this.createSubpathIdAddress=function(t){var n,s,i,a,o,r;try{if(!(t!=null&&t>-1)){throw"Missing namespace path ID input parameter."}s=l.getLastToken();n=s.componentDescriptor;r=l.model.implementation.getNamespaceDescriptorFromPathId(t);if(r.idComponent!==n.id){throw"Invalid path ID specified does not resolve to a namespace in the same component as the source address."}a=new e.implementation.AddressToken(l.model,s.idExtensionPoint,s.key,t);o=l.tokenVector.length>0&&l.tokenVector.slice(0,l.tokenVector.length-1)||[];o.push(a);i=new e.Address(l.model,o);return i}catch(c){throw"ONMjs.implementation.AddressDetails.createSubpathIdAddress failure: "+c}};this.pushToken=function(e){var t;try{if(l.tokenVector.length){t=l.tokenVector[l.tokenVector.length-1];l.validateTokenPair(t,e)}l.tokenVector.push(e.clone());if(e.componentDescriptor.id===0){l.complete=true}if(e.keyRequired){l.keysRequired=true}if(!e.isQualified()){l.keysSpecified=false}l.humanReadableString=void 0;l.hashString=void 0;return l.address}catch(n){throw"ONMjs.implementation.AddressDetails.pushToken failure: "+n}};this.validateTokenPair=function(e,t){try{if(!(e!=null&&e&&t!=null&&t)){throw"Internal error: input parameters are not correct."}if(!t.keyRequired){throw"Child token is invalid because it specifies a namespace in the root component."}if(e.namespaceDescriptor.id!==t.extensionPointDescriptor.id){throw"Child token is invalid because the parent token does not select the required extension point namespace."}if(!e.isQualified()&&t.isQualified()){throw"Child token is invalid because the parent token is unqualified and the child is qualified."}return true}catch(n){throw"ONMjs.implementation.AddressDetails.validateTokenPair the specified parent and child tokens are incompatible and cannot be used to form an address: "+n}};this.getLastToken=function(){try{if(!l.tokenVector.length){throw"Illegal call to getLastToken on uninitialized address class instance."}return l.tokenVector[l.tokenVector.length-1]}catch(e){throw"ONMjs.implementation.AddressDetails.getLastToken failure: "+e}};this.getDescriptor=function(){try{return l.getLastToken().namespaceDescriptor}catch(e){throw"ONMjs.implementation.AddressDetails.getDescriptor failure: "+e}};this.tokenVector=[];this.parentExtensionPointId=-1;this.complete=false;this.keysRequired=false;this.keysSpecified=true;r=s!=null&&s||[];for(a=0,o=r.length;a<o;a++){i=r[a];this.pushToken(i)}this.parentAddressesAscending=void 0;this.parentAddressesDescending=void 0;this.subnamespaceAddressesAscending=void 0;this.subnamespaceAddressesDescending=void 0;this.subcomponentAddressesAscending=void 0;this.subcomponentsAddressesDescending=void 0;this.humanReadableString=void 0;this.hashString=void 0}catch(c){throw"ONMjs.implementation.AddressDetails failure: "+c}}return t}();e.Address=function(){function t(t,s){this.visitExtensionPointAddresses=n(this.visitExtensionPointAddresses,this);this.visitChildAddresses=n(this.visitChildAddresses,this);this.visitSubaddressesDescending=n(this.visitSubaddressesDescending,this);this.visitSubaddressesAscending=n(this.visitSubaddressesAscending,this);this.visitParentAddressesDescending=n(this.visitParentAddressesDescending,this);this.visitParentAddressesAscending=n(this.visitParentAddressesAscending,this);this.getPropertiesModel=n(this.getPropertiesModel,this);this.getModel=n(this.getModel,this);this.createSubcomponentAddress=n(this.createSubcomponentAddress,this);this.createComponentAddress=n(this.createComponentAddress,this);this.createSubpathAddress=n(this.createSubpathAddress,this);this.createParentAddress=n(this.createParentAddress,this);this.clone=n(this.clone,this);this.isEqual=n(this.isEqual,this);this.isRoot=n(this.isRoot,this);this.getHashString=n(this.getHashString,this);this.getHumanReadableString=n(this.getHumanReadableString,this);var i=this;try{this.model=t!=null&&t||function(){throw"Missing required object model input parameter."}();this.implementation=new e.implementation.AddressDetails(this,t,s);this.isComplete=function(){return i.implementation.complete};this.isQualified=function(){return!i.implementation.keysRequired||i.implementation.keysSpecified};this.isResolvable=function(){return i.isComplete()&&i.isQualified()};this.isCreatable=function(){return i.isComplete()&&i.implementation.keysRequired&&!i.implementation.keysSpecified}}catch(a){throw"ONMjs.Address error: "+a}}t.prototype.getHumanReadableString=function(){var e,t,n,s,i,a;try{if(this.implementation.humanReadableString!=null&&this.implementation.humanReadableString){return this.implementation.humanReadableString}t=0;e="";a=this.implementation.tokenVector;for(s=0,i=a.length;s<i;s++){n=a[s];if(!t){e+=n.model.jsonTag}if(n.key!=null&&n.key){e+="."+n.key}else{if(n.idExtensionPoint>0){e+=".-"}}if(n.idNamespace){e+="."+n.namespaceDescriptor.jsonTag}t++}this.implementation.humanReadableString=e;return e}catch(o){throw"ONMjs.Address.getHumanReadableString failure: "+o}};t.prototype.getHashString=function(){var e,t,n,s,i,a;try{if(this.implementation.hashString!=null&&this.implementation.hashString){return this.implementation.hashString}t=0;e="";a=this.implementation.tokenVector;for(s=0,i=a.length;s<i;s++){n=a[s];if(!t){e+=""+n.model.jsonTag}if(n.key!=null&&n.key){e+="."+n.key}else{if(n.idExtensionPoint>0){e+=".-"}}if(n.idNamespace){e+="."+n.idNamespace}t++}this.implementation.hashString=encodeURIComponent(e).replace(/[!'()]/g,escape).replace(/\*/g,"%2A");return this.implementation.hashString}catch(o){throw"ONMjs.Address.getHashString failure: "+o}};t.prototype.isRoot=function(){try{return this.implementation.getLastToken().idNamespace===0}catch(e){throw"CNMjs.Address.isRoot failure: "+e}};t.prototype.isEqual=function(e){var t,n,s,i;try{if(!(e!=null&&e)){throw"Missing address input parameter."}if(this.implementation.tokenVector.length!==e.implementation.tokenVector.length){return false}n=true;t=0;while(t<this.implementation.tokenVector.length){s=this.implementation.tokenVector[t];i=e.implementation.tokenVector[t];if(!s.isEqual(i)){n=false;break}t++}return n}catch(a){throw"ONMjs.Address.isEqual failure: "+a}};t.prototype.clone=function(){try{return new e.Address(this.model,this.implementation.tokenVector)}catch(t){throw"ONMjs.Address.clone failure: "+t}};t.prototype.createParentAddress=function(t){var n,s,i,a,o,r;try{if(!this.implementation.tokenVector.length){throw"Invalid address contains no address tokens."}s=t!=null&&t||1;r=this.implementation.tokenVector.length-1;o=this.implementation.tokenVector[r--];if(o.namespaceDescriptor.id===0){return void 0}while(s){n=o.namespaceDescriptor;if(n.id===0){break}if(n.namespaceType!=="component"){o=new e.implementation.AddressToken(o.model,o.idExtensionPoint,o.key,n.parent.id)}else{o=r!==-1&&this.implementation.tokenVector[r--]||function(){throw"Internal error: exhausted token stack."}()}s--}a=r<0&&[]||this.implementation.tokenVector.slice(0,r+1);i=new e.Address(o.model,a);i.implementation.pushToken(o);return i}catch(l){throw"ONMjs.Address.createParentAddress failure: "+l}};t.prototype.createSubpathAddress=function(t){var n,s,i,a,o,r,l,c,d,p,u,h;try{if(!(t!=null&&t)){throw"Missing subpath input parameter."}l=this.implementation.getModelDescriptorFromSubpath(t);n=this.implementation.getDescriptor();if(n.namespaceType==="extensionPoint"&&l.namespaceType!=="component"){throw"Invalid subpath string must begin with the name of the component contained by the base address' extension point."}s=n.parentPathIdVector.length;c=l.parentPathIdVector.length;if(c-s<1){throw"Internal error due to failed consistency check."}d=l.parentPathIdVector.slice(s+1,c);d.push(l.id);i=this.implementation.tokenVector.slice(0,this.implementation.tokenVector.length-1)||[];o=new e.Address(this.model,i);p=this.implementation.getLastToken().clone();for(u=0,h=d.length;u<h;u++){r=d[u];a=this.model.implementation.getNamespaceDescriptorFromPathId(r);switch(a.namespaceType){case"component":o.implementation.pushToken(p);p=new e.implementation.AddressToken(p.model,p.namespaceDescriptor.id,void 0,r);break;default:p=new e.implementation.AddressToken(p.model,p.idExtensionPoint,p.key,r)}}o.implementation.pushToken(p);return o}catch(m){throw"ONMjs.Address.createSubpathAddress failure: "+m}};t.prototype.createComponentAddress=function(){var e,t;try{e=this.implementation.getDescriptor();if(e.isComponent){return this.clone()}t=this.implementation.createSubpathIdAddress(e.idComponent);return t}catch(n){throw"ONMjs.Address.createComponentAddress failure: "+n}};t.prototype.createSubcomponentAddress=function(){var t,n;try{t=this.implementation.getDescriptor();if(t.namespaceType!=="extensionPoint"){throw"Unable to determine subcomponent to create because this address does not specifiy an extension point namespace."}n=new e.implementation.AddressToken(this.model,t.id,void 0,t.archetypePathId);return this.clone().implementation.pushToken(n)}catch(s){throw"ONMjs.Address.createSubcomponentAddress failure: "+s}};t.prototype.getModel=function(){try{return this.implementation.getDescriptor().namespaceModelDeclaration}catch(e){throw"ONMjs.Address.getModel failure: "+e}};t.prototype.getPropertiesModel=function(){try{return this.implementation.getDescriptor().namespaceModelPropertiesDeclaration}catch(e){throw"ONMjs.Address.getPropertiesModel failure: "+e}};t.prototype.visitParentAddressesAscending=function(e){var t,n,s,i,a=this;try{if(!(e!=null&&e)){return false}if(!(this.parentAddressesAscending!=null&&this.parentAddressesAscending)){this.parentAddressesAscending=[];this.visitParentAddressesDescending(function(e){a.parentAddressesAscending.push(e);return true});this.parentAddressesAscending.reverse()}if(!this.parentAddressesAscending.length){return false}i=this.parentAddressesAscending;for(n=0,s=i.length;n<s;n++){t=i[n];try{e(t)}catch(o){throw"Failure occurred inside your registered callback function implementation: "+o}}return true}catch(o){throw"ONMjs.Address.visitParentAddressesAscending failure: "+o}};t.prototype.visitParentAddressesDescending=function(e){var t,n,s,i,a;try{if(!(e!=null&&e)){return false}if(!(this.parentAddressesDesending!=null&&this.parentAddressesDesceding)){this.parentAddressesDescending=[];n=this.createParentAddress();while(n){this.parentAddressesDescending.push(n);n=n.createParentAddress()}}if(!this.parentAddressesDescending.length){return false}a=this.parentAddressesDescending;for(s=0,i=a.length;s<i;s++){t=a[s];try{e(t)}catch(o){throw"Failure occurred inside your registered callback function implementation: "+o}}return true}catch(o){throw"ONMjs.Address.visitParentAddressesDescending failure: "+o}};t.prototype.visitSubaddressesAscending=function(e){var t,n,s,i,a,o,r,l,c,d;try{if(!(e!=null&&e)){return false}if(!(this.subnamespaceAddressesAscending!=null&&this.subnamespaceAddressesAscending)){this.subnamespaceAddressesAscending=[];n=this.implementation.getDescriptor();c=n.componentNamespaceIds;for(a=0,r=c.length;a<r;a++){i=c[a];s=this.implementation.createSubpathIdAddress(i);this.subnamespaceAddressesAscending.push(s)}}d=this.subnamespaceAddressesAscending;for(o=0,l=d.length;o<l;o++){t=d[o];try{e(t)}catch(p){throw"Failure occurred inside your registered callback function implementation: "+p}}return true}catch(p){throw"ONMjs.Address.visitSubaddressesAscending failure: "+p}};t.prototype.visitSubaddressesDescending=function(e){var t,n,s,i,a=this;try{if(!(e&&e)){return false}if(!(this.subnamespaceAddressesDescending!=null&&this.subnamespaceAddressesDescending)){this.subnamespaceAddressesDescending=[];this.visitSubaddressesAscending(function(e){return a.subnamespaceAddressesDescending.push(e)});this.subnamespaceAddressesDescending.reverse()}i=this.subnamespaceAddressesDescending;for(n=0,s=i.length;n<s;n++){t=i[n];try{e(t)}catch(o){throw"Failure occurred inside your registered callback function implementation: "+o}}return true}catch(o){throw"ONMjs.Address.visitSubaddressesAscending failure: "+o}};t.prototype.visitChildAddresses=function(e){var t,n,s,i,a,o;try{if(!(e!=null&&e)){return false}s=this.implementation.getDescriptor();o=s.children;for(i=0,a=o.length;i<a;i++){n=o[i];t=this.implementation.createSubpathIdAddress(n.id);try{e(t)}catch(r){throw"Failure occurred inside your registered callback function implementation: "+r}}return true}catch(r){throw"ONMjs.Address.visitChildAddresses failure: "+r}};t.prototype.visitExtensionPointAddresses=function(e){var t,n,s,i,a,o,r,l,c;try{if(!(e!=null&&e)){return false}if(!(this.extensionPointAddresses!=null&&this.extensionPointAddresses)){this.extensionPointAddresses=[];i=this.implementation.getDescriptor();l=i.extensionPoints;for(a in l){s=l[a];n=this.implementation.createSubpathIdAddress(s.id);this.extensionPointAddresses.push(n)}}c=this.extensionPointAddresses;for(o=0,r=c.length;o<r;o++){t=c[o];e(t)}return true}catch(d){throw"ONMjs.Address.visitExtensionPointAddresses failure: "+d}};return t}();t=typeof Encapsule!=="undefined"&&Encapsule!==null&&Encapsule||(this.Encapsule={});Encapsule.code=Encapsule.code!=null&&Encapsule.code||(this.Encapsule.code={});Encapsule.code.lib=Encapsule.code.lib!=null&&Encapsule.code.lib||(this.Encapsule.code.lib={});Encapsule.code.lib.onm=Encapsule.code.lib.onm!=null&&Encapsule.code.lib.onm||(this.Encapsule.code.lib.onm={});e=Encapsule.code.lib.onm;e.implementation=e.implementation!=null&&e.implementation||(e.implementation={});e.implementation.binding=e.implementation.binding!=null&&e.implementation.binding||(e.implementation.binding={});e.implementation.binding.InitializeNamespaceProperties=function(e,t){var n,s,i,a;try{if(!(e!=null&&e)){throw"Missing data reference input parameter."}if(!(t!=null&&t)){throw"Missing descriptor input parameter."}if(t.userImmutable!=null&&t.userImmutable){i=t.userImmutable;for(s in i){n=i[s];if(n.fnCreate!=null&&n.fnCreate){e[s]=n.fnCreate()}else{e[s]=n.defaultValue}}}if(t.userMutable!=null&&t.userMutable){a=t.userMutable;for(s in a){n=a[s];if(n.fnCreate!=null&&n.fnCreate){e[s]=n.fnCreate()}else{e[s]=n.defaultValue}}}return true}catch(o){throw"ONMjs.implementation.binding.InitializeNamespaceProperties failure "+o+"."}};e.implementation.binding.VerifyNamespaceProperties=function(e,t){var n,s,i,a,o;try{if(!(e!=null&&e)){throw"Missing data reference input parameter."}if(!(t!=null&&t)){throw"Missing descriptor input parameter."}if(t.userImmutable!=null&&t.userImmutable){a=t.userImmutable;for(s in a){n=a[s];i=e[s];if(!(i!=null)){throw"Expected immutable member '"+s+"' not found."}}}if(t.userMutable!=null&&t.userMutable){o=t.userMutable;for(s in o){n=o[s];i=e[s];if(!(i!=null)){throw"Expected mutable member '"+s+"' not found."}}}return true}catch(r){throw"ONMjs.implementation.binding.VerifyNamespaceMembers failure "+r+"."}};e.implementation.binding.InitializeComponentNamespaces=function(t,n,s,i,a){var o,r,l,c,d;try{if(!(n!=null&&n)){throw"Missing data reference input parameter."}if(!(s!=null&&s)){throw"Missing descriptor input parameter."}if(!(i!=null&&i)){throw"Missing extension point ID input parameter."}d=s.children;for(l=0,c=d.length;l<c;l++){o=d[l];if(o.namespaceType!=="component"){r=e.implementation.binding.ResolveNamespaceDescriptor({},t,n,o,a,"new");e.implementation.binding.InitializeComponentNamespaces(t,r.dataReference,o,i,a)}}return true}catch(p){throw"ONMjs.implementation.binding.InitializeComponentNamespaces failure: "+p+"."}};e.implementation.binding.VerifyComponentNamespaces=function(e,t,n,s){try{if(!(t!=null&&t)){throw"Missing data reference input parameter."}if(!(n!=null&&n)){throw"Missing descriptor input parameter."}return true}catch(i){throw"ONMjs.implementation.binding.VerifyComponentNamespaces failure: "+i+"."}};e.implementation.binding.ResolveNamespaceDescriptor=function(t,n,s,i,a,o){var r,l,c;try{if(!(t!=null&&t)){throw"Internal error: missing resolve actions structure input parameter."
}if(!(s!=null&&s)){throw"Internal error: missing parent data reference input parameter."}if(!(i!=null&&i)){throw"Internal error: missing object model descriptor input parameter."}if(!(o!=null&&o)){throw"Internal error: missing mode input parameter."}r=i.namespaceType!=="component"&&i.jsonTag||a||void 0;c={jsonTag:r,dataReference:r!=null&&r&&s[r]||void 0,dataParentReference:s,key:a,mode:o,descriptor:i,store:n,created:false};switch(o){case"bypass":if(!(c.dataReference!=null&&c.dataReference)){throw"Internal error: Unable to resolve "+i.namespaceType+" namespace descriptor in bypass mode."}break;case"new":if(c.dataReference!=null&&c.dataReference){break}l={};e.implementation.binding.InitializeNamespaceProperties(l,i.namespaceModelPropertiesDeclaration);if(i.namespaceType==="component"){if(!(t.setUniqueKey!=null&&t.setUniqueKey)){throw"You must define semanticBindings.setUniqueKey function in your data model declaration."}t.setUniqueKey(l);if(!(t.getUniqueKey!=null&&t.getUniqueKey)){throw"You must define semanticBindings.getUniqueKey function in your data model declaration."}c.key=c.jsonTag=t.getUniqueKey(l);if(!(c.key!=null&&c.key)){throw"Your data model's semanticBindings.getUniqueKey function returned an invalid key. Key cannot be zero or zero-length."}}c.dataReference=c.dataParentReference[c.jsonTag]=l;c.created=true;break;case"strict":if(!(resolveResult.dataReference!=null&&resolveResult.dataReference)){throw"Internal error: Unable to resolve  "+i.namespaceType+" namespace descriptor in strict mode."}e.implementation.binding.VerifyNamespaceProperties(result.dataReference,i.namespaceModelPropertiesDeclaration);break;default:throw"Unrecognized mode parameter value."}return c}catch(d){throw"ONMjs.implementation.binding.ResolveNamespaceDescriptor failure: "+d}};e.implementation.AddressTokenBinder=function(){function t(t,n,s,i){var a,o,r,l,c,d,p,u,h,m,b,f,v,w,g;try{this.store=t!=null&&t||function(){throw"Missing object store input parameter."}();c=t.model;this.parentDataReference=n!=null&&n||function(){throw"Missing parent data reference input parameter."}();if(!(s!=null&&s)){throw"Missing object model address token object input parameter."}if(!(i!=null&&i)){throw"Missing mode input parameter."}this.dataReference=void 0;this.resolvedToken=s.clone();v=s.namespaceDescriptor;f=s.componentDescriptor;m=c.getSemanticBindings();b=m!=null&&m&&m.setUniqueKey!=null&&m.setUniqueKey||void 0;l=m!=null&&m&&m.getUniqueKey!=null&&m.getUniqueKey||void 0;u={setUniqueKey:b,getUniqueKey:l};h=e.implementation.binding.ResolveNamespaceDescriptor(u,t,this.parentDataReference,s.componentDescriptor,s.key,i);this.dataReference=h.dataReference;if(h.created){this.resolvedToken.key=h.key}o=s.extensionPointDescriptor!=null&&s.extensionPointDescriptor&&s.extensionPointDescriptor.id||-1;if(i==="new"&&h.created){e.implementation.binding.InitializeComponentNamespaces(t,this.dataReference,f,o,this.resolvedToken.key)}if(i==="strict"){e.implementation.binding.VerifyComponentNamespaces(t,resolveResult.dataReference,f,o)}if(v.isComponent){return}r=v.parentPathIdVector.length-f.parentPathIdVector.length-1;d=r&&v.parentPathIdVector.slice(-r)||[];for(w=0,g=d.length;w<g;w++){p=d[w];a=c.implementation.getNamespaceDescriptorFromPathId(p);h=e.implementation.binding.ResolveNamespaceDescriptor(u,t,h.dataReference,a,h.key,i)}h=e.implementation.binding.ResolveNamespaceDescriptor(u,t,h.dataReference,v,h.key,i);this.dataReference=h.dataReference;return}catch(M){throw"ONMjs.implementation.AddressTokenBinder failure: "+M}}return t}();t=typeof Encapsule!=="undefined"&&Encapsule!==null&&Encapsule||(this.Encapsule={});Encapsule.code=Encapsule.code!=null&&Encapsule.code||(this.Encapsule.code={});Encapsule.code.lib=Encapsule.code.lib!=null&&Encapsule.code.lib||(this.Encapsule.code.lib={});Encapsule.code.lib.onm=Encapsule.code.lib.onm!=null&&Encapsule.code.lib.onm||(this.Encapsule.code.lib.onm={});e=Encapsule.code.lib.onm;e.implementation=e.implementation!=null&&e.implementation||(e.implementation={});e.implementation.AddressToken=function(){function t(e,t,s,i){this.isRoot=n(this.isRoot,this);this.isQualified=n(this.isQualified,this);this.isEqual=n(this.isEqual,this);this.clone=n(this.clone,this);try{this.model=e!=null&&e||function(){throw"Missing object model input parameter."}();if(!(i!=null)){throw"Missing target namespace ID input parameter."}this.idNamespace=i;this.namespaceDescriptor=e.implementation.getNamespaceDescriptorFromPathId(i);this.idComponent=this.namespaceDescriptor.idComponent;this.componentDescriptor=e.implementation.getNamespaceDescriptorFromPathId(this.idComponent);this.key=this.componentDescriptor.id>0&&s!=null&&s||void 0;this.keyRequired=false;this.idExtensionPoint=t!=null&&t||-1;this.extensionPointDescriptor=void 0;if(this.componentDescriptor.id===0){return}this.keyRequired=true;if(this.idExtensionPoint===-1&&!this.componentDescriptor.extensionPointReferenceIds.length){this.idExtensionPoint=this.componentDescriptor.parent.id}if(!this.idExtensionPoint){throw"You must specify the ID of the parent extension point when creating a token addressing a '"+this.componentDescriptor.path+"' component namespace."}this.extensionPointDescriptor=this.model.implementation.getNamespaceDescriptorFromPathId(this.idExtensionPoint);if(!(this.extensionPointDescriptor!=null&&this.extensionPointDescriptor)){throw"Internal error: unable to resolve extension point object model descriptor in request."}if(this.extensionPointDescriptor.namespaceType!=="extensionPoint"){throw"Invalid selector key object specifies an invalid parent extension point ID. Not an extension point."}if(this.extensionPointDescriptor.archetypePathId!==this.componentDescriptor.id){throw"Invalid selector key object specifies unsupported extension point / component ID pair."}return}catch(a){throw"ONMjs.implementation.AddressToken failure: "+a}}t.prototype.clone=function(){return new e.implementation.AddressToken(this.model,this.extensionPointDescriptor!=null&&this.extensionPointDescriptor&&this.extensionPointDescriptor.id||-1,this.key,this.namespaceDescriptor.id)};t.prototype.isEqual=function(e){var t;try{if(!(e!=null&&e)){throw"Missing token input parameter."}t=this.idNamespace===e.idNamespace&&this.key===e.key&&this.idExtensionPoint===e.idExtensionPoint;return t}catch(n){throw"ONMjs.AddressToken.isEqual failure: "+n}};t.prototype.isQualified=function(){return!this.keyRequired||this.key!=null&&this.key||false};t.prototype.isRoot=function(){return!this.componentId};return t}();t=typeof Encapsule!=="undefined"&&Encapsule!==null&&Encapsule||(this.Encapsule={});Encapsule.code=Encapsule.code!=null&&Encapsule.code||(this.Encapsule.code={});Encapsule.code.lib=Encapsule.code.lib!=null&&Encapsule.code.lib||(this.Encapsule.code.lib={});Encapsule.code.lib.onm=Encapsule.code.lib.onm!=null&&Encapsule.code.lib.onm||(this.Encapsule.code.lib.onm={});e=Encapsule.code.lib.onm;e.implementation=e.implementation!=null&&e.implementation||(e.implementation={});e.implementation.NamespaceDetails=function(){function e(e,t,n,s){var i=this;try{this.dataReference=t.implementation.dataReference!=null&&t.implementation.dataReference||function(){throw"Cannot resolve object store's root data reference."}();this.resolvedTokenArray=[];this.getResolvedToken=function(){return i.resolvedTokenArray.length&&i.resolvedTokenArray[i.resolvedTokenArray.length-1]||void 0};this.resolvedAddress=void 0}catch(a){throw"ONMjs.implementation.NamespaceDetails failure: "+a}}return e}();e.Namespace=function(){function t(t,s,i){this.visitExtensionPointSubcomponents=n(this.visitExtensionPointSubcomponents,this);this.update=n(this.update,this);this.toJSON=n(this.toJSON,this);this.data=n(this.data,this);this.getResolvedLabel=n(this.getResolvedLabel,this);this.getResolvedAddress=n(this.getResolvedAddress,this);var a,o,r,l,c,d,p,u,h,m,b,f,v,w;try{if(!(t!=null&&t)){throw"Missing object store input parameter."}this.store=t;this.implementation=new e.implementation.NamespaceDetails(this,t,s,i);a=void 0;if(!(s!=null&&s&&s.implementation.tokenVector.length)){p=t.model;a=new e.Address(p,[new e.implementation.AddressToken(p,void 0,void 0,0)])}else{a=s}h=t.model.jsonTag;u=a.model.jsonTag;if(h!==u){throw"You cannot access a '"+h+"' store namespace with a '"+u+"' object model address!"}if(!a.isComplete()){throw"Specified address is invalid because the first address token does not specify the object store's root component."}d=i!=null&&i||"bypass";if(d!=="new"&&!a.isResolvable()){throw"'"+d+"' mode error: Unresolvable address '"+a.getHumanReadableString()+"' invalid for this operation."}w=a.implementation.tokenVector;for(f=0,v=w.length;f<v;f++){o=w[f];b=new e.implementation.AddressTokenBinder(t,this.implementation.dataReference,o,d);this.implementation.resolvedTokenArray.push(b.resolvedToken);this.implementation.dataReference=b.dataReference;if(d==="new"){if(o.idComponent){if(!(o.key!=null&&o.key)){m=new e.Address(this.store.model,this.implementation.resolvedTokenArray);r=m.createComponentAddress();this.store.implementation.reifier.reifyStoreComponent(r);l=r.createParentAddress();c=this.store.openNamespace(l);c.update()}}}true}}catch(g){throw"ONMjs.Namespace failure: "+g}}t.prototype.getResolvedAddress=function(){try{if(this.implementation.resolvedAddress!=null&&this.implementation.resolvedAddress){return this.implementation.resolvedAddress}this.implementation.resolvedAddress=new e.Address(this.store.model,this.implementation.resolvedTokenArray);return this.implementation.resolvedAddress}catch(t){throw"ONMjs.Namespace.address failure: "+t}};t.prototype.getResolvedLabel=function(){var e,t,n,s;try{t=this.implementation.getResolvedToken().namespaceDescriptor;s=this.store.model.getSemanticBindings();e=s!=null&&s&&s.getLabel!=null&&s.getLabel||void 0;n=void 0;if(e!=null&&e){n=e(this.data(),this.getResolvedAddress())}else{n=t.label}return n}catch(i){throw"ONMjs.Namespace.getResolvedLabel failure: "+i}};t.prototype.data=function(){return this.implementation.dataReference};t.prototype.toJSON=function(e,t){var n,s,i,a;try{n=this.implementation.getResolvedToken().namespaceDescriptor;i={};i[n.jsonTag]=this.data();a=t!=null&&t||0;s=JSON.stringify(i,e,a);if(!(s!=null&&s)){throw"Cannot serialize Javascript object to JSON!"}return s}catch(o){throw"ONMjs.Namespace.toJSON failure: "+o}};t.prototype.update=function(){var e,t,n,s,i,a,o,r=this;try{e=this.getResolvedAddress();i=this.store.model.getSemanticBindings();a=i!=null&&i&&i.update!=null&&i.update||void 0;if(a!=null&&a){a(this.data());e.visitParentAddressesDescending(function(e){var t;t=r.store.openNamespace(e).data();return a(t)})}n=0;t=false;o=[];while(e!=null&&e){s=e.implementation.getDescriptor();if(n===0){this.store.implementation.reifier.dispatchCallback(e,"onNamespaceUpdated",void 0)}else{this.store.implementation.reifier.dispatchCallback(e,"onSubnamespaceUpdated",void 0)}if(s.namespaceType==="component"||s.namespaceType==="root"){if(!t){this.store.implementation.reifier.dispatchCallback(e,"onComponentUpdated",void 0);t=true}else{this.store.implementation.reifier.dispatchCallback(e,"onSubcomponentUpdated",void 0)}}e=e.createParentAddress();o.push(n++)}return o}catch(l){throw"ONMjs.Namespace.update failure: "+l}};t.prototype.visitExtensionPointSubcomponents=function(t){var n,s,i,a,o,r;try{a=this.implementation.getResolvedToken();if(!(a!=null&&a)){throw"Internal error: unable to resolve token."}if(a.namespaceDescriptor.namespaceType!=="extensionPoint"){throw"You may only visit the subcomponents of an extension point namespace."}r=this.data();for(s in r){i=r[s];n=this.getResolvedAddress().clone();o=new e.implementation.AddressToken(this.store.model,a.idNamespace,s,a.namespaceDescriptor.archetypePathId);n.implementation.pushToken(o);try{t(n)}catch(l){throw"Failure occurred inside your callback function implementation: "+l}}return true}catch(l){throw"ONMjs.Namepsace.visitExtensionPointSubcomponents failure: "+l}};return t}();t=typeof Encapsule!=="undefined"&&Encapsule!==null&&Encapsule||(this.Encapsule={});Encapsule.code=Encapsule.code!=null&&Encapsule.code||(this.Encapsule.code={});Encapsule.code.lib=Encapsule.code.lib!=null&&Encapsule.code.lib||(this.Encapsule.code.lib={});Encapsule.code.lib.onm=Encapsule.code.lib.onm!=null&&Encapsule.code.lib.onm||(this.Encapsule.code.lib.onm={});Encapsule.code.lib.onm.implementation=Encapsule.code.lib.onm.implementation!=null&&Encapsule.code.lib.onm.implementation||(this.Encapsule.code.lib.onm.implementation={});e=Encapsule.code.lib.onm;e.implementation.StoreReifier=function(){function t(t){var n=this;try{this.store=t;this.dispatchCallback=function(e,t,s){var i,a,o,r,l,c;try{if(s!=null&&s){a=n.store.implementation.observers[s];if(!(a!=null&&a)){throw"Internal error: unable to resolve observer ID to obtain callback interface."}i=a[t];if(i!=null&&i){try{return i(n.store,s,e)}catch(d){throw"An error occurred in the '"+t+"' method of your observer interface: "+d}}}else{l=n.store.implementation.observers;c=[];for(r in l){a=l[r];i=a[t];if(i!=null&&i){try{c.push(i(n.store,r,e))}catch(d){throw"An error occurred in the '"+t+"' method of your observer interface: "+d}}else{c.push(void 0)}}return c}}catch(d){o="ONMjs.implementation.StoreRefier.dispatchCallback failure while processing "+("address='"+e.getHumanReadableString()+"', callback='"+t+"', observer='"+(s!=null&&s||"[broadcast all]")+"': "+d);throw o}};this.reifyStoreComponent=function(e,t){var s;try{if(!(e!=null&&e)){throw"Internal error: Missing address input parameter."}if(!Encapsule.code.lib.js.dictionaryLength(n.store.implementation.observers)){return}s=n.dispatchCallback;s(e,"onComponentCreated",t);e.visitSubaddressesAscending(function(e){return s(e,"onNamespaceCreated",t)});return true}catch(i){throw"ONMjs.implementation.StoreReifier failure: "+i}};this.unreifyStoreComponent=function(e,t){var s;try{if(!(e!=null&&e)){throw"Internal error: Missing address input parameter."}if(!Encapsule.code.lib.js.dictionaryLength(n.store.implementation.observers)){return}s=n.dispatchCallback;e.visitSubaddressesDescending(function(e){return s(e,"onNamespaceRemoved",t)});s(e,"onComponentRemoved",t);return true}catch(i){throw"ONMjs.implementation.StoreReifier failure: "+i}};this.reifyStoreExtensions=function(t,s,i){var a;try{if(!(t!=null&&t)){throw"Internal error: Missing address input parameter."}if(!Encapsule.code.lib.js.dictionaryLength(n.store.implementation.observers)){return}a=n.dispatchCallback;return t.visitExtensionPointAddresses(function(t){var a;a=new e.Namespace(n.store,t);a.visitExtensionPointSubcomponents(function(e){if(!i){n.reifyStoreComponent(e,s);n.reifyStoreExtensions(e,s,false)}else{n.reifyStoreExtensions(e,s,true);n.unreifyStoreComponent(e,s)}return true});return true})}catch(o){throw"ONMjs.implementation.StoreReifier failure: "+o}}}catch(s){throw"ONMjs.implementation.StoreReifier constructor failed: "+s}}return t}();t=typeof Encapsule!=="undefined"&&Encapsule!==null&&Encapsule||(this.Encapsule={});Encapsule.code=Encapsule.code!=null&&Encapsule.code||(this.Encapsule.code={});Encapsule.code.lib=Encapsule.code.lib!=null&&Encapsule.code.lib||(this.Encapsule.code.lib={});Encapsule.code.lib.onm=Encapsule.code.lib.onm!=null&&Encapsule.code.lib.onm||(this.Encapsule.code.lib.onm={});Encapsule.code.lib.onm.implementation=Encapsule.code.lib.onm.implementation!=null&&Encapsule.code.lib.onm.implementation||(this.Encapsule.code.lib.onm.implementation={});e=Encapsule.code.lib.onm;e.implementation.StoreDetails=function(){function t(t,n,s){try{this.store=t;this.model=n;this.reifier=new e.implementation.StoreReifier(this.store);this.dataReference={};this.objectStoreSource=void 0;this.observers={};this.observersState={}}catch(i){throw"ONMjs.implementation.StoreDetails failure: "+i}}return t}();e.Store=function(){function t(t,n){var s,i,a=this;try{this.implementation=new e.implementation.StoreDetails(this,t,n);if(!(t!=null&&t)){throw"Missing object model parameter!"}this.model=t;this.jsonTag=t.jsonTag;this.label=t.label;this.description=t.description;if(n!=null&&n){this.implementation.dataReference=JSON.parse(n);if(!(this.implementation.dataReference!=null&&this.implementation.dataReference)){throw"Cannot deserialize specified JSON string!"}this.implementation.objectStoreSource="json"}else{this.implementation.dataReference={};this.implementation.objectStoreSource="new";s=new e.implementation.AddressToken(t,void 0,void 0,0);i=new e.implementation.AddressTokenBinder(this,this.implementation.dataReference,s,"new")}this.validateAddressModel=function(e){try{if(!(e!=null&&e)){throw"Missing address input parameter."}return a.model.isEqual(e.model)}catch(t){throw"ONMjs.Store.verifyAddress failure: "+t}};this.createComponent=function(t){var n,s;try{if(!(t!=null&&t)){throw"Missing object model namespace selector input parameter."}if(!a.validateAddressModel(t)){throw"The specified address cannot be used to reference this store because it's not bound to the same model as this store."}if(t.isQualified()){throw"The specified address is qualified and may only be used to specify existing objects in the store."}s=t.implementation.getDescriptor();if(!s.isComponent){throw"The specified address does not specify the root of a component."}if(s.namespaceType==="root"){throw"The specified address refers to the root namespace of the store which is created automatically."}n=new e.Namespace(a,t,"new");return n}catch(i){throw"ONMjs.Store.createComponent failure: "+i}};this.removeComponent=function(e){var t,n,s,i,o,r;try{if(!(e!=null&&e)){throw"Missing address input parameter!"}if(!a.validateAddressModel(e)){throw"The specified address cannot be used to reference this store because it's not bound to the same model as this store."}if(!e.isQualified()){throw"You cannot use an unqualified address to remove a component."}i=e.implementation.getDescriptor();if(!i.isComponent){throw"The specified address does not specify the root of a component."}if(i.namespace==="root"){throw"The specified address refers to the root namespace of the store which cannot be removed."}a.implementation.reifier.reifyStoreExtensions(e,void 0,true);a.implementation.reifier.unreifyStoreComponent(e);s=a.openNamespace(e);o=e.createParentAddress();r=a.openNamespace(o);t=r.data();n=e.implementation.getLastToken().key;delete t[n];r.update();return s}catch(l){throw"ONMjs.Store.removeComponent failure: "+l}};this.openNamespace=function(t){var n;try{if(!(t&&t)){throw"Missing address input parameter."}if(!a.validateAddressModel(t)){throw"The specified address cannot be used to reference this store because it's not bound to the same model as this store."}n=new e.Namespace(a,t,"bypass");return n}catch(s){throw"ONMjs.Store.openNamespace failure: "+s}};this.toJSON=function(e,t){var n,s;try{s=a.openNamespace(a.model.createRootAddress());n=s.toJSON(e,t);return n}catch(i){throw"ONMjs.Store.toJSON fail on object store "+a.jsonTag+" : "+i}};this.registerObserver=function(e,t){var n,s;try{if(!(e!=null&&e)){throw"Missing callback interface namespace input parameter.."}e.observingEntity=t;n=uuid.v4();a.implementation.observers[n]=e;s=a.model.createRootAddress();a.implementation.reifier.dispatchCallback(void 0,"onObserverAttachBegin",n);a.implementation.reifier.reifyStoreComponent(s,n);a.implementation.reifier.reifyStoreExtensions(s,n);a.implementation.reifier.dispatchCallback(void 0,"onObserverAttachEnd",n);return n}catch(i){throw"ONMjs.Store.registerObserver failure: "+i}};this.unregisterObserver=function(e){var t,n;try{if(!(e!=null&&e)){throw"Missing observer ID code input parameter!"}t=a.implementation.observers[e];if(!(t!=null&&t)){throw"Unknown observer ID code provided. No registration to remove."}a.implementation.reifier.dispatchCallback(void 0,"onObserverDetachBegin",e);n=a.model.createRootAddress();a.implementation.reifier.reifyStoreExtensions(n,e,true);a.implementation.reifier.unreifyStoreComponent(n,e);a.implementation.reifier.dispatchCallback(void 0,"onObserverDetachEnd",e);a.removeObserverState(e);return delete a.implementation.observers[e]}catch(s){throw"ONMjs.Store.unregisterObserver failure: "+s}};this.openObserverState=function(e){var t;try{if(!(e!=null&&e)){throw"Missing observer ID parameter!"}t=a.implementation.observersState[e]!=null&&a.implementation.observersState[e]||(a.implementation.observersState[e]=[]);return t}catch(n){throw"ONMjs.Store.openObserverStateObject failure: "+n}};this.removeObserverState=function(e){if(!(e!=null&&e)){throw"Missing observer ID parameter!"}if(typeof observerState!=="undefined"&&observerState!==null&&observerState){if(a.implementation.observerState[e]!=null&&a.implementation.observerState[e]){delete a.implementation.observerState[e]}}return a};this.openObserverComponentState=function(e,t){var n,i;try{if(!(e!=null&&e)){throw"Missing observer ID parameter."}if(!(t!=null&&t)){throw"Missing address input parameter."}s=t.implementation.getLastToken();i=s.componentDescriptor.id;n=t.createComponentAddress();return a.openObserverNamespaceState(e,n)}catch(o){throw"ONMjs.Store.openObserverComponentState failure: "+o}};this.openObserverNamespaceState=function(e,t){var n,i,o,r,l;try{if(!(e!=null&&e)){throw"Missing observer ID parameter."}if(!(t!=null&&t)){throw"Missing address input parameter."}l=a.openObserverState(e);s=t.implementation.getLastToken();n=s.namespaceDescriptor.id;i=l[n]!=null&&l[n]||(l[n]={});r=t.getHashString();o=i[r]!=null&&i[r]||(i[r]={});return o}catch(c){throw"ONMjs.Store.openObserverNamespaceState failure: "+c}};this.removeObserverNamespaceState=function(e,t){var n,s,i;s=a.modelViewObserversState[e];if(!(s!=null&&s)){return a}i=s[namespaceSelector_.pathId];if(!(i!=null&&i)){return a}n=namespaceSelector_.getHashString();delete i[n];if(Encapsule.code.lib.js.dictionaryLength(i)===0){delete s[namespaceSelector_.pathId]}return a}}catch(o){throw"ONMjs.Store failure: "+o}}return t}();t=typeof Encapsule!=="undefined"&&Encapsule!==null&&Encapsule||(this.Encapsule={});Encapsule.code=Encapsule.code!=null&&Encapsule.code||(this.Encapsule.code={});Encapsule.code.lib=Encapsule.code.lib!=null&&Encapsule.code.lib||(this.Encapsule.code.lib={});Encapsule.code.lib.onm=Encapsule.code.lib.onm!=null&&Encapsule.code.lib.onm||(this.Encapsule.code.lib.onm={});e=Encapsule.code.lib.onm;e.AddressStore=function(t){i(s,t);function s(t,i){this.setAddress=n(this.setAddress,this);this.getAddress=n(this.getAddress,this);var a,o,r=this;try{if(!(t!=null&&t)){throw"Missing object store input parameter. Unable to determine external selector type."}this.referenceStore=t;o=new e.Model({jsonTag:"addressStore",label:""+t.model.jsonTag+" Address Cache",description:""+t.model.label+" observable address cache."});s.__super__.constructor.call(this,o);a=o.createRootAddress();this.selectorNamespace=new e.Namespace(this,a);this.selectorNamespaceData=this.selectorNamespace.data();this.selectorNamespaceData.selectedNamespace=void 0;this.setAddress(i);this.objectStoreCallbacks={onNamespaceUpdated:function(e,t,n){var s;try{s=r.getAddress();if(s!=null&&s&&s.isEqual(n)){return r.setAddress(n)}}catch(i){throw"ONMjs.AddressStore.objectStoreCallbacks.onNamespaceUpdated failure: "+i}},onNamespaceRemoved:function(e,t,n){var s,i;try{s=r.getAddress();if(s!=null&&s&&s.isEqual(n)){i=s.createParentAddress();r.setAddress(i)}}catch(a){throw"ONMjs.AddressStore.objectStoreCallbacks.onNamespaceRemoved failure: "+a}}}}catch(l){throw"ONMjs.AddressStore failure: "+l}}s.prototype.getAddress=function(){var e;try{e=this.selectorNamespaceData.selectedNamespace;if(!(e!=null&&e)){return void 0}return e.getResolvedAddress()}catch(t){throw"ONMjs.AddressStore.getSelector failure: "+t}};s.prototype.setAddress=function(t){try{if(!(t&&t)){this.selectorNamespaceData.selectedNamespace=void 0}else{this.selectorNamespaceData.selectedNamespace=new e.Namespace(this.referenceStore,t)}return this.selectorNamespace.update()}catch(n){throw"ONMjs.AddressStore.setAddress failure: "+n}};return s}(e.Store);Encapsule.code.lib.onm.about={};Encapsule.code.lib.onm.about.version="0.1.00";Encapsule.code.lib.onm.about.build="Mon Nov 11 20:26:10 UTC 2013";Encapsule.code.lib.onm.about.epoch="1384201570";Encapsule.code.lib.onm.about.uuid="9059239b-f537-4b4f-88f5-722e50cb5b89"}).call(this);(function(){var e,t;ko.bindingHandlers.editableText={init:function(e,t){return $(e).on("blur",function(){var e;e=t();return e($(this).text())})},update:function(e,t){var n;n=ko.utils.unwrapObservable(t());return $(e).text(n)}};t=typeof Encapsule!=="undefined"&&Encapsule!==null&&Encapsule||(this.Encapsule={});Encapsule.code=Encapsule.code!=null&&Encapsule.code||(this.Encapsule.code={});Encapsule.code.lib=Encapsule.code.lib!=null&&Encapsule.code.lib||(this.Encapsule.code.lib={});Encapsule.code.lib.kohelpers=Encapsule.code.lib.kohelpers!=null&&Encapsule.code.lib.kohelpers||(this.Encapsule.code.lib.kohelpers={});Encapsule.runtime=Encapsule.runtime!=null&&Encapsule.runtime||(this.Encapsule.runtime={});Encapsule.runtime.app=Encapsule.runtime.app!=null&&Encapsule.runtime.app||(this.Encapsule.runtime.app={});Encapsule.runtime.app.kotemplates=Encapsule.runtime.app.kotemplates!=null&&Encapsule.runtime.app.kotemplates||(this.Encapsule.runtime.app.kotemplates=[]);Encapsule.code.lib.kohelpers.RegisterKnockoutViewTemplate=function(e,t){var n;try{if(!(e!=null)||!e||!(t!=null)||!t){throw"RegisterKnockoutViewTemplate bad parameter(s)"}n={selectorId_:e,fnHtml_:t};Encapsule.runtime.app.kotemplates.push(n);return true}catch(s){throw"RegisterKnockoutViewTemplate selectorId="+e+" : "+s}};Encapsule.code.lib.kohelpers.InstallKnockoutViewTemplate=function(e,t){var n,s,i;try{if(!(t!=null)||!t){throw"Invalid templateCache element parameter."}if(!(e!=null)||!e){throw"Invalid descriptor parameter."}if(!(e.selectorId_!=null)||!e.selectorId_){throw"Invalid descriptor.selectorId_ parameter."}if(!(e.fnHtml_!=null)||!e.fnHtml_){throw"Invalid descriptor.fnHtml_ parameter."}i="#"+e.selectorId_;s=$(i);if(s.length===1){throw'Duplicate Knockout.js HTML view template registration. id="'+e.selectorId_+'"'}n=void 0;try{n=e.fnHtml_()}catch(a){throw"While evaluating the "+e.selectorId_+" HTML callback: "+a}t.append($('<script type="text/html" id="'+e.selectorId_+'">'+n+"</script>"));return true}catch(a){throw"Encapsule.code.lib.kohelpers.InstallKnockoutViewTemplate for descriptor "+e.selectorId_+" : "+a}};Encapsule.code.lib.kohelpers.InstallKnockoutViewTemplates=function(e){var t,n,s,i,a;try{if(!(e!=null&&e)){throw"You must specify the selector string of the Knockout.js view model template cache's DOM element."}n=$(e);a=Encapsule.runtime.app.kotemplates;for(s=0,i=a.length;s<i;s++){t=a[s];Encapsule.code.lib.kohelpers.InstallKnockoutViewTemplate(t,n)}Encapsule.runtime.app.kotemplates=[];return true}catch(o){throw"InstallKnockoutViewTemplates failure: "+o}};t=typeof Encapsule!=="undefined"&&Encapsule!==null&&Encapsule||(this.Encapsule={});Encapsule.code=Encapsule.code!=null&&Encapsule.code||(this.Encapsule.code={});Encapsule.code.lib=Encapsule.code.lib!=null&&Encapsule.code.lib||(this.Encapsule.code.lib={});Encapsule.code.lib.onm=Encapsule.code.lib.onm!=null&&Encapsule.code.lib.onm||(this.Encapsule.code.lib.onm={});e=Encapsule.code.lib.onm;e.observers=e.observers!=null&&e.observers||(e.observers={});e.observers.GenericTest=function(){function e(e){var t=this;this.backchannel=e!=null&&e||function(){throw"Missing backchannel input parameter."}();this.callbackInterface={onObserverAttachBegin:function(e,n){return t.backchannel.log("ONMjs_"+e.jsonTag+"Observer::"+n+"::onObserverAttachBegin")},onObserverAttachEnd:function(e,n){return t.backchannel.log("ONMjs_"+e.jsonTag+"Observer::"+n+"::onObserverAttachEnd")},onObserverDetachBegin:function(e,n){return t.backchannel.log("ONMjs_"+e.jsonTag+"Observer::"+n+"::onObserverDetachBegin")},onObserverDetachEnd:function(e,n){return t.backchannel.log("ONMjs_"+e.jsonTag+"Observer::"+n+"::onObserverDetachEnd")},onComponentCreated:function(e,n,s){return t.backchannel.log("ONMjs_"+e.jsonTag+"Observer::"+n+"::onComponentCreated("+s.getHumanReadableString()+")")},onComponentUpdated:function(e,n,s){return t.backchannel.log("ONMjs_"+e.jsonTag+"Observer::"+n+"::onComponentUpdated("+s.getHumanReadableString()+")")},onComponentRemoved:function(e,n,s){return t.backchannel.log("ONMjs_"+e.jsonTag+"Observer::"+n+"::onComponentRemoved("+s.getHumanReadableString()+")")},onNamespaceCreated:function(e,n,s){return t.backchannel.log("ONMjs_"+e.jsonTag+"Observer::"+n+"::onNamespaceCreated("+s.getHumanReadableString()+")")},onNamespaceUpdated:function(e,n,s){return t.backchannel.log("ONMjs_"+e.jsonTag+"Observer::"+n+"::onNamespaceUpdated("+s.getHumanReadableString()+")")},onNamespaceRemoved:function(e,n,s){return t.backchannel.log("ONMjs_"+e.jsonTag+"Observer::"+n+"::onNamespaceRemoved("+s.getHumanReadableString()+")")},onSubNamespaceUpdated:function(e,n,s){return t.backchannel.log("ONMjs_"+e.jsonTag+"Observer::"+n+"::onSubNamespaceUpdated("+s.getHumanReadableString()+")")},onSubComponentUpdated:function(e,n,s){return t.backchannel.log("ONMjs_"+e.jsonTag+"Observer::"+n+"::onSubComponentUpdated("+s.getHumanReadableString()+")")}}}return e}();t=typeof Encapsule!=="undefined"&&Encapsule!==null&&Encapsule||(this.Encapsule={});Encapsule.code=Encapsule.code!=null&&Encapsule.code||(this.Encapsule.code={});Encapsule.code.lib=Encapsule.code.lib!=null&&Encapsule.code.lib||(this.Encapsule.code.lib={});Encapsule.code.lib.onm=Encapsule.code.lib.onm!=null&&Encapsule.code.lib.onm||(this.Encapsule.code.lib.onm={});e=Encapsule.code.lib.onm;e.observers=e.observers!=null&&e.observers||(e.observers={});e.observers.BackchannelView=function(){function e(e){var t=this;try{this.backchannel=e!=null&&e||function(){throw"Missing backchannel parameter."}();this.logHandlerOriginal=void 0;this.errorHandlerOriginal=void 0;this.viewEl=void 0;this.backchannel.clearLog=function(){return true};this.setViewSelector=function(n){try{if(!(n!=null&&n)){t.viewEl=void 0;t.backchannel.logHandler=t.logHandlerOriginal;t.backchannel.errorHandler=t.errorHandlerOriginal;return}t.viewEl=$(n);if(!(t.viewEl!=null&&t.viewEl)){throw"Cannot resolve selector string '"+selectorString+"'"}t.logHandlerOriginal=e.logHandler;t.errorHandlerOriginal=e.errorHandler;t.backchannel.logHandler=function(e){var n;n=$('<div style="background-color: rgba(255,255,255,0.1); margin-bottom: 1px; white-space: nowrap;" >'+e+"</div>");return t.viewEl.append(n)};t.backchannel.errorHandler=function(e){var n;n=$('<div style="background-color: rgba(255,255,0,0.5); margin-bottom: 1px; white-space: nowrap;" ><h1>error</h1></div>');t.viewEl.append(n);n=$('<div style="background-color: rgba(255,255,0,0.3); margin-bottom: 1px; " >'+e+"</div>");return t.viewEl.append(n)};return t.backchannel.clearLog=function(){return t.viewEl.html("")}}catch(s){throw"ONMjs.observers.BackchannelView failure: "+s}};this}catch(n){throw"ONMjs.observers.BackchannelModelView failure: "+n}}return e}();Encapsule.code.lib.kohelpers.RegisterKnockoutViewTemplate("idKoTemplate_BackchannelViewModel",function(){return'<div class="classONMjsSelectedJson">\n    <span class="titleString">Data Model Host</span>\n</div>\n<div id="idBackchannelLogMessages" style: position: relative; top: 0px;" ></div>'});t=typeof Encapsule!=="undefined"&&Encapsule!==null&&Encapsule||(this.Encapsule={});Encapsule.code=Encapsule.code!=null&&Encapsule.code||(this.Encapsule.code={});Encapsule.code.lib=Encapsule.code.lib!=null&&Encapsule.code.lib||(this.Encapsule.code.lib={});Encapsule.code.lib.onm=Encapsule.code.lib.onm!=null&&Encapsule.code.lib.onm||(this.Encapsule.code.lib.onm={});e=Encapsule.code.lib.onm;e.observers=e.observers!=null&&e.observers||(e.observers={});e.observers.NavigatorModelView=function(){function t(t){var n=this;try{this.backchannel=t!=null&&t||function(){throw"Missing backchannel input parameter."}();this.objectStore=void 0;this.rootMenuModelView=ko.observable(void 0);this.store=void 0;this.storeObserverId=void 0;this.selectedCachedAddressSink=void 0;this.attachToStore=function(e){try{if(!(e!=null&&e)){throw"Missing store input parameter."
}if(n.storeObserverId!=null&&n.storeObserverId){throw"This navigator instance is already observing an ONMjs.Store instance."}n.store=e;n.storeObserverId=e.registerObserver(n.objectStoreObserverInterface,n);return true}catch(t){throw"ONMjs.observers.NavigatorModelView.attachToStore failure: "+t}};this.detachFromStore=function(){try{if(!(n.storeObserverId!=null)&&n.storeObserverId){throw"This navigator instance is not attached to an ONMjs.Store instance."}n.store.unregisterObserver(n.storeObserverId);n.storeObserverId=void 0;n.store=void 0;return true}catch(e){throw"ONMjs.observers.NavigatorModelView.detachFromStore failure: "+e}};this.attachToCachedAddress=function(e){var t;try{if(!(e!=null&&e)){throw"Missing cached address input parameter."}t=e.registerObserver(n.cachedAddressObserverInterface,n);return t}catch(s){throw"ONMjs.observers.NavigatorModelView.attachToCachedAddress failure: "+excpetion}};this.detachFromCachedAddress=function(e,t){try{if(!(e!=null&&e)){throw"Missing cached address input parameter."}if(!(t!=null&&t)){throw"Missing observer ID input parameter."}e.unregisterObserver(t);return true}catch(n){throw"ONMjs.observers.NavigatorModelView.detachFromCachedAddress failure: "+n}};this.setCachedAddressSink=function(e){try{return n.selectedCachedAddressSink=e}catch(t){throw"ONMjs.observers.NavigatorModelView.setCachedAddressSink failure: "+t}};this.routeUserSelectAddressRequest=function(e){var t;try{if(n.selectedCachedAddressSink!=null&&n.selectedCachedAddressSink){n.selectedCachedAddressSink.setAddress(e);return}t="ONMjs.obsevers.NavigatorModelView.routeUserSelectAddressRequest for address  '"+e.getHashString()+"'failed. "+"setCachedAddressSink method must be called to set the routing destination.";return alert(t)}catch(s){throw"ONMjs.observers.NavigatorModelView.routeUserSelectAddressRequest failure: "+s}};this.objectStoreObserverInterface={onObserverAttachBegin:function(e,t){try{n.backchannel.log("ONMjs.observer.NavigatorModelview is now observing ONMjs.Store.");if(n.storeObserverId!=null&&n.storeObserverId){throw"This navigator instance is already observing an ONMjs.Store."}n.storeObserverId=t;return true}catch(s){throw"ONMjs.observers.NavigatorModelView.objectStoreObserverCallbacks.onObserverAttach failure: "+s}},onObserverDetachEnd:function(e,t){try{n.backchannel.log("ONMjs.observers.NavigatorModelView is no longer observing ONMjs.Store.");if(!(n.storeObserverId!=null&&n.storeObserverId)){throw"Internal error: received detach callback but it doesn't apprear we're attached?"}if(n.storeObserverId!==t){throw"Internal error: received detach callback for un unrecognized observer ID?"}n.storeObserverId=void 0;return true}catch(s){throw"ONMjs.observers.NavigatorModelView.objectStoreObserverCallbacks.onObserverDetach failure: "+s}},onNamespaceCreated:function(t,s,i){var a,o,r;try{if(n.storeObserverId!==s){throw"Unrecognized observer ID."}a=t.openObserverNamespaceState(s,i);a.description="Hey this is the ONMjs.observers.NavigatorModelView class saving some submenu state.";a.itemModelView=new e.observers.implementation.NavigatorItemModelView(t,n,i,n.backchannel);if(i.isRoot()){n.rootMenuModelView(a.itemModelView)}o=i.createParentAddress();if(o!=null&&o!=null){r=t.openObserverNamespaceState(s,o);r.itemModelView.children.push(a.itemModelView);return a.indexInParentChildArray=r.itemModelView.children().length-1}}catch(l){throw"ONMjs.observers.NavigatorModelView failure: "+l}},onNamespaceUpdated:function(e,t,s){var i,a,o;try{if(n.storeObserverId!==t){throw"Unrecognized observer ID."}a=s.getModel();if(a.namespaceType!=="component"){return}i=e.openNamespace(s);o=e.openObserverNamespaceState(t,s);return o.itemModelView.label(i.getResolvedLabel())}catch(r){throw"ONMjs.observers.NavigatorModelView.onNamespaceUpdated failure: "+excpetion}},onNamespaceRemoved:function(e,t,s){var i,a,o,r,l,c,d,p;try{if(n.storeObserverId!==t){throw"Unrecognized observer ID."}r=e.openObserverNamespaceState(t,s);if(s.isRoot()){n.rootMenuModelView(void 0)}l=s.createParentAddress();if(l!=null&&l){d=e.openObserverNamespaceState(t,l);c=d.itemModelView.children();p=r.indexInParentChildArray;c.splice(p,1);while(p<c.length){i=c[p];a=i.address;o=e.openObserverNamespaceState(t,a);o.indexInParentChildArray=p++}d.itemModelView.children(c);return true}}catch(u){throw"ONMjs.observers.NavigatorModelView.onNamespaceRemoved failure: "+u}}};this.selectedNamespacesBySelectorHash={};this.cachedAddressObserverInterface={onComponentCreated:function(e,t,s){try{return n.cachedAddressObserverInterface.onComponentUpdated(e,t,s)}catch(i){throw"ONMjs.observers.NavigatorModelView.cachedAddressObserverInterface.onComponentCreated failure: "+i}},onComponentUpdated:function(e,t,s){var i,a,o;try{o=e.openObserverState(t);if(o.itemModelView!=null&&o.itemModelView){o.itemModelView.removeSelection(t)}i=e.getAddress();if(i!=null&&i){a=n.store.openObserverNamespaceState(n.storeObserverId,i);if(!(a.itemModelView!=null&&a.itemModelView)){throw"Internal error: namespace state cache for this namespace is not initialized."}a.itemModelView.addSelection(t);return o.itemModelView=a.itemModelView}}catch(r){throw"ONMjs.observers.NavigatorModelView.cachedAddressObserverInterface.onComponentUpdated failure: "+r}}}}catch(s){throw" ONMjs.observers.NavigatorModelView consructor failure: "+s}}return t}();Encapsule.code.lib.kohelpers.RegisterKnockoutViewTemplate("idKoTemplate_NavigatorViewModel",function(){return'<span data-bind="if: rootMenuModelView()">\n    <div class="classONMjsNavigator">\n        <span data-bind="template: { name: \'idKoTemplate_NavigatorItemViewModel\', foreach: rootMenuModelView().children }"></span>\n    </div>\n</span>\n<span data-bind="ifnot: rootMenuModelView()">\nOffline.\n</span>'});t=typeof Encapsule!=="undefined"&&Encapsule!==null&&Encapsule||(this.Encapsule={});Encapsule.code=Encapsule.code!=null&&Encapsule.code||(this.Encapsule.code={});Encapsule.code.lib=Encapsule.code.lib!=null&&Encapsule.code.lib||(this.Encapsule.code.lib={});Encapsule.code.lib.onm=Encapsule.code.lib.onm!=null&&Encapsule.code.lib.onm||(this.Encapsule.code.lib.onm={});e=Encapsule.code.lib.onm;e.observers=e.observers!=null&&e.observers||(e.observer={});e.observers.implementation=e.observers.implementation!=null&&e.observers.implementation||(e.observers.implementation={});e.observers.implementation.NavigatorItemModelView=function(){function e(e,t,n,s){var i,a=this;try{this.backchannel=s!=null&&s||function(){throw"Missing backchannel input parameter."}();if(!(e!=null&&e)){throw"Missing object store input parameter."}if(!(t!=null&&t)){throw"Missing parent object model navigator window input parameter."}if(!(n!=null&&n)){throw"Missing address input parameter."}this.store=e;this.navigatorModelView=t;this.address=n;this.children=ko.observableArray([]);this.isSelected=ko.observable(false);this.selectionsByObserverId={};i=e.openNamespace(n);this.label=ko.observable(i.getResolvedLabel());this.onClick=function(){try{return a.navigatorModelView.routeUserSelectAddressRequest(a.address)}catch(e){return a.backchannel.error("ONMjs.observers.implementation.NavigatorItemModelView.onClick failure: "+e)}};this.addSelection=function(e){try{if(!(e!=null&&e)){throw"Missing observer ID input parameter."}a.selectionsByObserverId[e]=true;return a.isSelected(true)}catch(t){throw"ONMjs.observers.implementation.NavigatorItemModelView.addSelection failure: "+t}};this.removeSelection=function(e){try{if(!(e!=null&&e)){throw"Missing observer ID input parameter."}delete a.selectionsByObserverId[e];return a.isSelected(Encapsule.code.lib.js.dictionaryLength(a.selectionsByObserverId)&&true||false)}catch(t){throw"ONMjs.observers.implementation.NavigatorItemModelView.removeSelection failure: "+t}}}catch(o){throw"ONMjs.observers.implementation.NavigatorItemModelView failure: : "+o}}return e}();Encapsule.code.lib.kohelpers.RegisterKnockoutViewTemplate("idKoTemplate_NavigatorItemViewModel",function(){return'<span data-bind="if: isSelected()">\n    <div class="classONMjsNavigatorItem classONMjsNavigatorItemSelected">\n        <div class="classONMjsNavigatorItemSelectedLabel" data-bind="text: label" ></div>\n\n        <span data-bind="if: children().length">\n            <div class="classONMjsNavigatorItemSelectedChildren">\n                <div data-bind="template: { name: \'idKoTemplate_NavigatorItemViewModel\', foreach: children }"></div>\n            </div>\n        </span>\n\n    </div>\n</span>\n\n<span data-bind="ifnot: isSelected()">\n    <div class="classONMjsNavigatorItem classONMjsNavigatorItemUnselected classONMjsMouseOverPointer" data-bind="click: onClick, clickBubble: false" >\n        <div class="classONMjsNavigatorItemUnselectedLabel" data-bind="text: label"></div>\n\n        <span data-bind="if: children().length">\n            <div class="classONMjsNavigatorItemUnselectedChildren">\n                <div data-bind="template: { name: \'idKoTemplate_NavigatorItemViewModel\', foreach: children }"></div>\n            </div>\n        </span>\n\n    </div>\n</span>'});t=typeof Encapsule!=="undefined"&&Encapsule!==null&&Encapsule||(this.Encapsule={});Encapsule.code=Encapsule.code!=null&&Encapsule.code||(this.Encapsule.code={});Encapsule.code.lib=Encapsule.code.lib!=null&&Encapsule.code.lib||(this.Encapsule.code.lib={});Encapsule.code.lib.onm=Encapsule.code.lib.onm!=null&&Encapsule.code.lib.onm||(this.Encapsule.code.lib.onm={});e=Encapsule.code.lib.onm;e.observers.SelectedJsonModelView=function(){function e(e){var t=this;try{this.backchannel=e!=null&&e||function(){throw"Missing backchannel input parameter."}();this.title=ko.observable("<not connected>");this.selectorHash=ko.observable("<not connected>");this.jsonString=ko.observable("<not connected>");this.observerAttached=ko.observable(false);this.cachedAddressStore=void 0;this.cachedAddressObserverId=void 0;this.saveJSONAsLinkHtml=ko.computed(function(){var e;return e='<a href="data:text/json;base64,'+window.btoa(t.jsonString())+'" target="_blank" title="Open raw JSON in new tab..."> \n<img src="./img/json_file-48x48.png" style="width: 24px; heigh: 24px; border: 0px solid black; vertical-align: middle;" ></a>'});this.attachToCachedAddress=function(e){try{if(!(e!=null&&e)){throw"Missing cached address store input parameter."}if(t.cachedAddressStore!=null&&t.cachedAddressStore){throw"Already attached to an ONMjs.CachedAddress object."}t.cachedAddressStore=e;t.cachedAddressObserverId=e.registerObserver(t.cachedAddressCallbackInterface,t);t.observerAttached(true);return true}catch(n){throw"ONMjs.observers.SelectedJsonModelView.attachToCachedAddress failure: "+n+"."}};this.detachFromCachedAddress=function(){try{if(!(t.cachedAddressStore!=null&&t.cachedAddressStore)){throw"Not attached to address store object."}t.cachedAddressStore.unregisterObserver(t.cachedAddressObserverId);t.cachedAddressStore=void 0;t.cachedAddressObserverId=void 0;t.observerAttached(false);return true}catch(e){throw"ONMjs.observers.SelectedJsonModelView.detachFromCachedAddress failure: "+e+"."}};this.cachedAddressCallbackInterface={onComponentCreated:function(e,n,s){try{return t.cachedAddressCallbackInterface.onComponentUpdated(e,n,s)}catch(i){throw"ONMjs.observers.SelectedJsonModelView.cachedAddressCallbackInterface.onComponentCreated failure: "+i}},onComponentUpdated:function(e,n,s){var i,a;try{a=e.getAddress();if(!(a!=null&&a)){t.title("<no selected address>");t.selectorHash("Address: <no selected address>");t.jsonString("<undefined>");return true}i=e.referenceStore.openNamespace(a);t.title(i.getResolvedLabel());t.selectorHash(i.getResolvedAddress().getHashString());t.jsonString(i.toJSON(void 0,2));return true}catch(o){throw"ONMjs.observers.SelectedJsonModelView.cachedAddressCallbackInterface.onComponentUpdated failure: "+o}}}}catch(n){throw"ONMjs.observers.SelectedJsonModelView construction failure: "+n}}return e}();Encapsule.code.lib.kohelpers.RegisterKnockoutViewTemplate("idKoTemplate_ObjectModelNavigatorJsonModelView",function(){return'<span data-bind="if: observerAttached()">\n<div class="classONMjsSelectedJson">\n    <span data-bind="html: saveJSONAsLinkHtml"></span>\n    <span class="titleString" data-bind="html: title"></span>\n</div>\naddress hash:<br>\n<span class="classONMjsSelectedJsonAddressHash" data-bind="html: selectorHash"></span>\n<div class="classObjectModelNavigatorJsonBody">\n    <pre class="classONMjsSelectedJsonBody" data-bind="html: jsonString"></pre>\n</div>\n</span>\n<span data-bind="ifnot: observerAttached()">\nOffline.\n</span>'});t=typeof Encapsule!=="undefined"&&Encapsule!==null&&Encapsule||(this.Encapsule={});Encapsule.code=Encapsule.code!=null&&Encapsule.code||(this.Encapsule.code={});Encapsule.code.lib=Encapsule.code.lib!=null&&Encapsule.code.lib||(this.Encapsule.code.lib={});Encapsule.code.lib.onm=Encapsule.code.lib.onm!=null&&Encapsule.code.lib.onm||(this.Encapsule.code.lib.onm={});e=Encapsule.code.lib.onm;e.observers=e.observers!=null&&e.observers||(e.observers={});e.observers.implementation=e.observers.implementation!=null&&e.observers.implementation||(e.observers.implementation={});e.observers.implementation.SelectedPathElementModelView=function(){function e(e,t,n,s,i){var a,o,r,l=this;try{this.backchannel=i!=null&&i||function(){throw"Missing backchannel input parameter."}();this.cachedAddressStore=e;this.objectStoreAddress=s;this.isSelected=t===n;a=e.referenceStore.openNamespace(s);o=a.getResolvedLabel();this.prefix="";switch(t){case 0:break;case 1:this.prefix+=" :: ";break;default:this.prefix+=" / ";break}if(this.prefix.length){this.prefix='<span class="prefix">'+this.prefix+"</span>"}this.label="";if(this.isSelected){this.label+='<span class="selected">'+o+"</span>"}else{r="parent classONMjsMouseOverPointer";if(s.getModel().namespaceType==="component"){r+=" component"}this.label+='<span class="'+r+'">'+o+"</span>"}this.onClick=function(){try{if(!l.isSelected){return l.cachedAddressStore.setAddress(l.objectStoreAddress)}}catch(e){return l.backchannel.error("ONMjs.observers.implementation.SelectedPathElementModelView.onClick failure: "+e)}}}catch(c){throw"ONMjs.observers.SelectedPathElementModelView failure: "+c}}return e}();Encapsule.code.lib.kohelpers.RegisterKnockoutViewTemplate("idKoTemplate_SelectedPathElementViewModel",function(){return'<span class="classONMjsSelectedPathElement"><span data-bind="html: prefix"></span><span data-bind="html: label, click: onClick"></span></span>'});e.observers.SelectedPathModelView=function(){function t(t){var n=this;try{this.backchannel=t!=null&&t||function(){throw"Missing backchannel input parameter."}();this.pathElements=ko.observableArray([]);this.cachedAddressStore=void 0;this.cachedAddressStoreObserverId=void 0;this.addressHumanString=ko.observable("not connected");this.addressHashString=ko.observable("not connected");this.attachToCachedAddress=function(e){try{if(!(e!=null&&e)){throw"Missing cached address input parameter."}if(n.cachedAddressStore!=null&&n.cachedAddressStore){throw"Already attached to an ONMjs.CachedAddress object."}n.cachedAddressStore=e;n.cachedAddressStoreObserverId=e.registerObserver(n.cachedAddressObserverInterface,n);return true}catch(t){throw"ONMjs.observers.SelectedPathModelView.attachToCachedAddress failure: "+t}};this.detachFromCachedAddress=function(){try{if(!(n.cachedAddressStoreObserverId!=null&&n.cachedAddressStoreObserverId)){throw"Not attached to an ONMjs.CachedAddress object."}n.cachedAddressStore.unregisterObserver(n.cachedAddressStoreObserverId);n.cachedAddressStoreObserverId=void 0;n.cachedAddressStore=void 0;return true}catch(e){throw"ONMjs.observers.SelectedPathModelView.detachFromCachedAddress failure: "+e}};this.cachedAddressObserverInterface={onObserverAttachEnd:function(e,t){return n.backchannel.log("ONMjs.observers.SelectedPathModelView has attached to and is observing in ONMjs.CachedAddress instance.")},onObserverDetachEnd:function(e,t){n.pathElements.removeAll();n.addressHashString("not connected");n.addressHumanString("not connected");n.cachedAddressStore=void 0;n.cachedAddressStoreObserverId=void 0;return n.backchannel.log("ONMjs.observers.SelectedPathModelView has detached from and is no longer observing an ONMjs.CachedAddress instance.")},onComponentCreated:function(e,t,s){try{return n.cachedAddressObserverInterface.onComponentUpdated(e,t,s)}catch(i){return"ONMjs.observers.SelectedPathModelView.cachedAddressObserverInterface.onComponentCreated failure: "+i}},onComponentUpdated:function(t,s,i){var a,o,r,l,c,d,p,u;try{c=t.getAddress();if(!(c!=null&&c)){return true}n.addressHumanString(c.getHumanReadableString());n.addressHashString(c.getHashString());o=[];c.visitParentAddressesAscending(function(e){return o.push(e)});o.push(c);r=0;d=o.length-1;n.pathElements.removeAll();for(p=0,u=o.length;p<u;p++){a=o[p];l=new e.observers.implementation.SelectedPathElementModelView(t,r++,d,a,n.backchannel);n.pathElements.push(l)}return true}catch(h){throw"OMNjs.observers.SelectedPathModelView.cachedAddressObserverInterface.onComponentUpdated failure: "+h}}}}catch(s){throw"ONMjs.observers.SelectedPathModelView construction failure: "+s}}return t}();Encapsule.code.lib.kohelpers.RegisterKnockoutViewTemplate("idKoTemplate_SelectedPathViewModel",function(){return'<span data-bind="if: pathElements().length">\n<div class="classONMjsSelectedPath"><span data-bind="template: { name: \'idKoTemplate_SelectedPathElementViewModel\', foreach: pathElements }"></span></div>\n<div style="margin-top: 8px; font-family: Courier;"><span data-bind="text: addressHumanString"></span></div>\n<div style="font-family: Courier;"><span data-bind="text: addressHashString"></span></div>\n</span>\n<span data-bind="ifnot: pathElements().length">\nOffline.\n</span>'});t=typeof Encapsule!=="undefined"&&Encapsule!==null&&Encapsule||(this.Encapsule={});Encapsule.code=Encapsule.code!=null&&Encapsule.code||(this.Encapsule.code={});Encapsule.code.lib=Encapsule.code.lib!=null&&Encapsule.code.lib||(this.Encapsule.code.lib={});Encapsule.code.lib.onm=Encapsule.code.lib.onm!=null&&Encapsule.code.lib.onm||(this.Encapsule.code.lib.onm={});e=Encapsule.code.lib.onm;e.observers=e.observers!=null&&e.observers||(e.observers={});e.observers.SelectedNamespaceModelView=function(){function t(t){var n=this;try{this.backchannel=t!=null&&t||function(){throw"Missing backchannel input parameter."}();this.objectStoreName=ko.observable("<not connected>");this.title=ko.observable("<not connected>");this.observerAttached=ko.observable(false);this.modelviewActions=ko.observable(void 0);this.modelviewTitle=ko.observable(void 0);this.modelviewImmutable=ko.observable(void 0);this.modelviewMutable=ko.observable(void 0);this.modelviewComponent=ko.observable(void 0);this.modelviewChildren=ko.observable(void 0);this.modelviewCollection=ko.observable(void 0);this.cachedAddressStore=void 0;this.cachedAddressStoreObserverId=void 0;this.attachToCachedAddress=function(e){try{if(!(e!=null&&e)){throw"Missing cached address input parameter."}if(n.cachedAddressStore!=null&&n.cachedAddressStore){throw"This namespace observer is already attached to a selected address store."}n.cachedAddressStore=e;n.cachedAddressStoreObserverId=e.registerObserver(n.cachedAddressObserverInterface,n);n.observerAttached(true);return true}catch(t){throw"ONMjs.observers.SelectedNamespaceModelView.attachToCachedAddress failure: "+t}};this.detachFromCachedAddress=function(){try{if(!(n.cachedAddressStoreObserverId&&n.cachedAddressStoreObserverId)){throw"This namespace observer is not currently attached to a cached address store."}n.cachedAddressStore.unregisterObserver(n.cachedAddressStoreObserverId);n.cachedAddressStore=void 0;n.cachedAddressStoreObserverId=void 0;n.observerAttached(false);return true}catch(e){throw"ONMjs.observers.SelectedNamespaceModelView.detachFromCachedAddress failure: "+e}};this.cachedAddressObserverInterface={onComponentCreated:function(e,t,s){return n.cachedAddressObserverInterface.onComponentUpdated(e,t,s)},onComponentUpdated:function(t,s,i){var a,o,r,l,c,d,p,u,h;d=t.referenceStore;p=t.getAddress();if(!(p&&p)){return true}u=d.openNamespace(p);h=p.getModel();n.objectStoreName=d.jsonTag;a={backchannel:n.backchannel,cachedAddressStore:t,objectStore:d,selectedAddress:p,selectedNamespace:u,selectedNamespaceModel:h};n.modelviewTitle(new e.observers.SelectedNamespaceTitleModelView(a,n.backchannel));n.modelviewActions(new e.observers.SelectedNamespaceActionsModelView(a,n.backchannel));l=h.namespaceType;switch(l){case"root":o=new e.observers.SelectedNamespaceImmutablePropertiesModelView(a);n.modelviewImmutable(o.propertyModelViews.length&&o||void 0);r=new e.observers.SelectedNamespaceMutablePropertiesModelView(a);n.modelviewMutable(r.propertyModelViews.length&&r||void 0);c=new e.observers.SelectedNamespaceChildrenModelView(a);n.modelviewChildren(c.childModelViews.length&&c||void 0);n.modelviewComponent(new e.observers.SelectedNamespaceComponentModelView(a));n.modelviewCollection(void 0);break;case"child":o=new e.observers.SelectedNamespaceImmutablePropertiesModelView(a);n.modelviewImmutable(o.propertyModelViews.length&&o||void 0);r=new e.observers.SelectedNamespaceMutablePropertiesModelView(a);n.modelviewMutable(r.propertyModelViews.length&&r||void 0);c=new e.observers.SelectedNamespaceChildrenModelView(a);n.modelviewChildren(c.childModelViews.length&&c||void 0);n.modelviewComponent(new e.observers.SelectedNamespaceComponentModelView(a));n.modelviewCollection(void 0);break;case"extensionPoint":n.modelviewImmutable(void 0);n.modelviewMutable(void 0);n.modelviewChildren(void 0);n.modelviewComponent(new e.observers.SelectedNamespaceComponentModelView(a));n.modelviewCollection(new e.observers.SelectedNamespaceCollectionModelView(a));break;case"component":o=new e.observers.SelectedNamespaceImmutablePropertiesModelView(a);n.modelviewImmutable(o.propertyModelViews.length&&o||void 0);r=new e.observers.SelectedNamespaceMutablePropertiesModelView(a);n.modelviewMutable(r.propertyModelViews.length&&r||void 0);c=new e.observers.SelectedNamespaceChildrenModelView(a);n.modelviewChildren(c.childModelViews.length&&c||void 0);n.modelviewComponent(new e.observers.SelectedNamespaceComponentModelView(a));n.modelviewCollection(void 0);break;default:throw"Unrecognized namespace type in request."}}}}catch(s){throw"ONMjs.observers.SelectedNamespaceModelView construction failure: "+s}}return t}();Encapsule.code.lib.kohelpers.RegisterKnockoutViewTemplate("idKoTemplate_SelectedNamespaceViewModel",function(){return'<span data-bind="if: observerAttached()">\n<span data-bind="if: modelviewTitle"><span data-bind="with: modelviewTitle"><span data-bind="template: { name: \'idKoTemplate_SelectedNamespaceTitleViewModel\' }"></span></span></span>\n<span data-bind="if: modelviewActions"><span data-bind="with: modelviewActions"><span data-bind="template: { name: \'idKoTemplate_SelectedNamespaceActionsViewModel\' }"></span></span></span>\n<span data-bind="if: modelviewImmutable"><span data-bind="with: modelviewImmutable"><span data-bind="template: { name: \'idKoTemplate_SelectedNamespaceImmutablePropertiesViewModel\' }"></span></span></span>\n<span data-bind="if: modelviewMutable"><span data-bind="with: modelviewMutable"><span data-bind="template: { name: \'idKoTemplate_SelectedNamespaceMutablePropertiesViewModel\'}"></span></span></span>\n<span data-bind="if: modelviewCollection"><span data-bind="with: modelviewCollection"><span data-bind="template: { name: \'idKoTemplate_SelectedNamespaceCollectionViewModel\'}"></span></span></span>\n<span data-bind="if: modelviewChildren"><span data-bind="with: modelviewChildren"><span data-bind="template: { name: \'idKoTemplate_SelectedNamespaceChildrenViewModel\'}"></span></span></span>\n<span data-bind="if: modelviewComponent"><span data-bind="with: modelviewComponent"><span data-bind="template: { name: \'idKoTemplate_SelectedNamespaceComponentViewModel\'}"></span></span></span>\n</span>\n<span data-bind="ifnot: observerAttached()">\nOffline.\n</span>'});t=typeof Encapsule!=="undefined"&&Encapsule!==null&&Encapsule||(this.Encapsule={});Encapsule.code=Encapsule.code!=null&&Encapsule.code||(this.Encapsule.code={});Encapsule.code.lib=Encapsule.code.lib!=null&&Encapsule.code.lib||(this.Encapsule.code.lib={});Encapsule.code.lib.onm=Encapsule.code.lib.onm!=null&&Encapsule.code.lib.onm||(this.Encapsule.code.lib.onm={});e=Encapsule.code.lib.onm;e.observers=e.observers!=null&&e.observers||(e.observers={});e.observers.SelectedNamespaceActionsModelView=function(){function t(t){var n,s,i,a,o,r=this;try{this.backchannel=t.backchannel!=null&&t.backchannel||function(){throw"Missing backchannel input parameter."}();this.onClickAddSubcomponent=function(e,t,n,s,i){var a;try{r.backchannel.log("ObjectModelNavigatorNamespaceActions.onClickAddSubcomponent starting...");a=s.referenceStore.createComponent(n);return s.setAddress(a.getResolvedAddress())}catch(o){return r.backchannel.error("ONMjs.observers.SelectedNamespaceActionsModelView.onClickAddSubcomponent failure: "+o)}};this.onClickRemoveComponent=function(e,t,n,s,i){try{return r.showConfirmRemove(true)}catch(a){throw"ONMjs.observers.SelectedNamespaceActionsModelView.onClickRemoveComponent failure: "+a}};this.onDoRemoveComponent=function(e,t,n,s,i){try{return s.referenceStore.removeComponent(n)}catch(a){return r.backchannel.error("ONMjs.observers.SelectedNamespaceActionsModelView.onClickRemoveComponent failure: "+a)}};this.onClickRemoveAllSubcomponents=function(e,t,n,s,i){try{return r.showConfirmRemoveAll(true)}catch(a){throw"ONMjs.observers.SelectedNamespaceActionsModelView.onClickRemoveAllSubcomponents failure: "+a}};this.onDoRemoveAllSubcomponents=function(e,t,n,s,i){var a,o,l,c,d,p,u;try{l=s.referenceStore;o=l.openNamespace(n);c=[];o.visitExtensionPointSubcomponents(function(e){return c.push(e)});u=[];for(d=0,p=c.length;d<p;d++){a=c[d];u.push(l.removeComponent(a))}return u}catch(h){return r.backchannel.error("ONMjs.observers.SelectedNamespaceActionsModelView.onClickRemoveAllSubcomponents failure: "+h)}};this.onClickCancelActionRequest=function(e,t,n,s,i){try{r.showConfirmRemoveAll(false);return r.showConfirmRemove(false)}catch(a){throw"ONMjs.observers.SelectedNamespaceActionsModelView.onClickCancelActionRequest failure: "+a}};this.actionsForNamespace=false;this.callbackLinkAddSubcomponent=void 0;this.callbackLinkRequestRemoveAllSubcomponents=void 0;this.callbackLinkRemoveAllSubcomponents=void 0;this.callbackLinkRequestRemoveComponent=void 0;this.callbackLinkRemoveComponent=void 0;this.callbackLinkCancelActionRequest=new e.observers.helpers.CallbackLinkModelView("","Cancel Request",void 0,void 0,{styleClass:"classONMjsActionButtonCancel"},this.onClickCancelActionRequest,this.backchannel);this.showConfirmRemove=ko.observable(false);this.showConfirmRemoveAll=ko.observable(false);switch(t.selectedNamespaceModel.namespaceType){case"root":break;case"child":break;case"extensionPoint":s=t.selectedAddress.createSubcomponentAddress();i=s.getModel();n=i.____label!=null&&i.____label||"<no label provided>";this.callbackLinkAddSubcomponent=new e.observers.helpers.CallbackLinkModelView("","Add "+n,s,t.cachedAddressStore,{styleClass:"classONMjsActionButtonAdd"},this.onClickAddSubcomponent,this.backchannel);o=Encapsule.code.lib.js.dictionaryLength(t.selectedNamespace.data());a=t.selectedNamespaceModel.____label!=null&&t.selectedNamespaceModel.____label||"<no label defined>";this.callbackLinkRequestRemoveAllSubcomponents=new e.observers.helpers.CallbackLinkModelView("","Remove All "+a,void 0,void 0,{noLink:o===0,styleClass:o!==0&&"classONMjsActionButtonRemoveAll"||void 0},this.onClickRemoveAllSubcomponents,this.backchannel);this.callbackLinkRemoveAllSubcomponents=new e.observers.helpers.CallbackLinkModelView("","Proceed with Remove All",t.selectedAddress,t.cachedAddressStore,{noLink:o===0,styleClass:o!==0&&"classONMjsActionButtonConfirm"||void 0},this.onDoRemoveAllSubcomponents,this.backchannel);this.actionsForNamespace=true;break;case"component":a=t.selectedNamespaceModel.____label!=null&&t.selectedNamespaceModel.____label||"<no label provided>";this.callbackLinkRequestRemoveComponent=new e.observers.helpers.CallbackLinkModelView("","Remove "+a,void 0,void 0,{styleClass:"classONMjsActionButtonRemove"},this.onClickRemoveComponent,this.backchannel);this.callbackLinkRemoveComponent=new e.observers.helpers.CallbackLinkModelView("","Proceed with Remove",t.selectedAddress,t.cachedAddressStore,{styleClass:"classONMjsActionButtonConfirm"},this.onDoRemoveComponent,this.backchannel);this.actionsForNamespace=true;break}}catch(l){throw"ONMjs.observers.SelectedNamespaceActions construction failure: "+l}}return t}();Encapsule.code.lib.kohelpers.RegisterKnockoutViewTemplate("idKoTemplate_SelectedNamespaceActionsViewModel",function(){return'<span data-bind="if: actionsForNamespace">\n<div class="classONMjsSelectedNamespaceSectionTitle">\n    Actions:\n</div>\n<div class="classONMjsSelectedNamespaceSectionCommon classONMjsSelectedNamespaceActions">\n    <span data-bind="if: actionsForNamespace">\n        <div>\n            <span data-bind="if: callbackLinkAddSubcomponent">\n                <span data-bind="with: callbackLinkAddSubcomponent">\n                    <span data-bind="template: { name: \'idKoTemplate_CallbackLinkViewModel\' }"></span>\n                </span>\n            </span>\n            <span data-bind="if: callbackLinkRequestRemoveAllSubcomponents">\n                <span data-bind="with: callbackLinkRequestRemoveAllSubcomponents">\n                    <span data-bind="template: { name: \'idKoTemplate_CallbackLinkViewModel\' }"></span>\n                </span>\n            </span>\n            <span data-bind="if: callbackLinkRequestRemoveComponent">\n                <span data-bind="with: callbackLinkRequestRemoveComponent">\n                    <span data-bind="template: { name: \'idKoTemplate_CallbackLinkViewModel\' }"></span>\n                </span>\n            </span>\n\n            <span data-bind="if: showConfirmRemove">\n                <div class="classONMjsActionConfirmation">\n                    Please confirm <strong><span data-bind="text: callbackLinkRequestRemoveComponent.label"></span></span></strong> request.<br><br>\n                    <span data-bind="with: callbackLinkCancelActionRequest">\n                        <span data-bind="template: { name: \'idKoTemplate_CallbackLinkViewModel\' }"></span>\n                    </span>\n                    <span data-bind="with: callbackLinkRemoveComponent">\n                        <span data-bind="template: { name: \'idKoTemplate_CallbackLinkViewModel\' }"></span>\n                    </span>\n                </div>\n            </span>\n\n            <span data-bind="if: showConfirmRemoveAll">\n                <div class="classONMjsActionConfirmation">\n                    Please confirm <strong><span data-bind="text: callbackLinkRequestRemoveAllSubcomponents.label"></span></span></strong> request.<br><br>\n                    <span data-bind="with: callbackLinkCancelActionRequest">\n                        <span data-bind="template: { name: \'idKoTemplate_CallbackLinkViewModel\' }"></span>\n                    </span>\n                    <span data-bind="with: callbackLinkRemoveAllSubcomponents">\n                        <span data-bind="template: { name: \'idKoTemplate_CallbackLinkViewModel\' }"></span>\n                    </span>\n                </div>\n            </span>\n\n        </div>\n    </span>\n    <span data-bind="ifnot: actionsForNamespace"><i>No actions defined for this namespace.</i></span>\n</div>\n</span>'});t=typeof Encapsule!=="undefined"&&Encapsule!==null&&Encapsule||(this.Encapsule={});Encapsule.code=Encapsule.code!=null&&Encapsule.code||(this.Encapsule.code={});Encapsule.code.lib=Encapsule.code.lib!=null&&Encapsule.code.lib||(this.Encapsule.code.lib={});Encapsule.code.lib.onm=Encapsule.code.lib.onm!=null&&Encapsule.code.lib.onm||(this.Encapsule.code.lib.onm={});e=Encapsule.code.lib.onm;e.observers=e.observers!=null&&e.observers||(e.observers={});
e.observers.SelectedNamespaceChildrenModelView=function(){function t(t){var n,s=this;try{this.backchannel=t.backchannel!=null&&t.backchannel||function(){throw"Missing backchannel input parameter."}();this.childModelViews=[];n=0;t.selectedAddress.visitChildAddresses(function(i){var a,o,r;if(i.getModel().namespaceType!=="extensionPoint"){a=t.cachedAddressStore.referenceStore.openNamespace(i);r=""+(n++ +1)+": ";o=""+a.getResolvedLabel()+"<br>";return s.childModelViews.push(new e.observers.helpers.AddressSelectionLinkModelView(r,o,i,t.cachedAddressStore,void 0,s.backchannel))}})}catch(i){throw"ONMjs.observers.SelectedNamespaceChildrenModelView failure: "+i}}return t}();Encapsule.code.lib.kohelpers.RegisterKnockoutViewTemplate("idKoTemplate_SelectedNamespaceChildrenViewModel",function(){return'<span data-bind="if: childModelViews.length">\n    <div class="classONMjsSelectedNamespaceSectionTitle">Child Namespaces (<span data-bind="text: childModelViews.length"></span>):</div>\n    <div class="classONMjsSelectedNamespaceSectionCommon classONMjsSelectedNamespaceChildren">\n        <span data-bind="template: { name: \'idKoTemplate_AddressSelectionLinkViewModel\', foreach: childModelViews }"></span>\n    </div>\n</span>'});t=typeof Encapsule!=="undefined"&&Encapsule!==null&&Encapsule||(this.Encapsule={});Encapsule.code=Encapsule.code!=null&&Encapsule.code||(this.Encapsule.code={});Encapsule.code.lib=Encapsule.code.lib!=null&&Encapsule.code.lib||(this.Encapsule.code.lib={});Encapsule.code.lib.onm=Encapsule.code.lib.onm!=null&&Encapsule.code.lib.onm||(this.Encapsule.code.lib.onm={});e=Encapsule.code.lib.onm;e.observers=e.observers!=null&&e.observers||(e.observers={});e.observers.SelectedNamespaceCollectionModelView=function(){function t(t){var n,s,i,a=this;try{this.backchannel=t.backchannel!=null&&t.backchannel||function(){throw"Missing backchannel input parameter."}();this.subcomponentModelViews=[];s=t.selectedNamespaceModel.____label;this.namespaceLabel=s!=null&&s||"<no label provided>";i=t.cachedAddressStore.referenceStore.model.getSemanticBindings();n=0;t.selectedNamespace.visitExtensionPointSubcomponents(function(i){var o,r;r=t.cachedAddressStore.referenceStore.openNamespace(i);o=""+(n++ +1)+": ";s=""+r.getResolvedLabel()+"<br>";return a.subcomponentModelViews.push(new e.observers.helpers.AddressSelectionLinkModelView(o,s,i,t.cachedAddressStore,void 0,a.backchannel))})}catch(o){throw"ONMjs.observers.SelectedNamespaceCollectionModelView failure: "+o}}return t}();Encapsule.code.lib.kohelpers.RegisterKnockoutViewTemplate("idKoTemplate_SelectedNamespaceCollectionViewModel",function(){return'<span data-bind="if: subcomponentModelViews.length">\n<div class="classONMjsSelectedNamespaceSectionTitle">\n<span class="class="classONMjsAddressSelectionLinkLabelNoLink" data-bind="html: namespaceLabel"></span>\nSubcomponents (<span data-bind="text: subcomponentModelViews.length"></span>):\n</div>\n<div class="classONMjsSelectedNamespaceSectionCommon classONMjsSelectedNamespaceCollection">\n<span data-bind="ifnot: subcomponentModelViews.length">\n<i><span class="classONMjsAddressSelectionLinkLabelNoLink" data-bind="html: namespaceLabel"></span> extension point is empty.</i>\n</span>\n<span data-bind="if: subcomponentModelViews.length">\n<span class="link" data-bind="template: { name: \'idKoTemplate_AddressSelectionLinkViewModel\', foreach: subcomponentModelViews }"></span>\n</span>\n</div>\n</span>'});t=typeof Encapsule!=="undefined"&&Encapsule!==null&&Encapsule||(this.Encapsule={});Encapsule.code=Encapsule.code!=null&&Encapsule.code||(this.Encapsule.code={});Encapsule.code.lib=Encapsule.code.lib!=null&&Encapsule.code.lib||(this.Encapsule.code.lib={});Encapsule.code.lib.onm=Encapsule.code.lib.onm!=null&&Encapsule.code.lib.onm||(this.Encapsule.code.lib.onm={});e=Encapsule.code.lib.onm;e.observers=e.observers!=null&&e.observers||(e.observers={});e.observers.SelectedNamespaceComponentModelView=function(){function t(t){var n,s,i,a=this;try{this.backchannel=t.backchannel!=null&&t.backchannel||function(){throw"Missing backchannel input parameter."}();n=t.selectedAddress.createComponentAddress();s=t.cachedAddressStore.referenceStore.openNamespace(n);this.extensionPointModelViewArray=[];i=0;n.visitExtensionPointAddresses(function(n){var s,o,r,l,c;r=n.isEqual(t.selectedAddress);s=t.cachedAddressStore.referenceStore.openNamespace(n);l=void 0;if(i++){l=" &bull; "}o=""+s.getResolvedLabel();c=Encapsule.code.lib.js.dictionaryLength(s.data());o+=" ("+c+")";return a.extensionPointModelViewArray.push(new e.observers.helpers.AddressSelectionLinkModelView(l,o,n,t.cachedAddressStore,{noLink:r},a.backchannel))})}catch(o){throw"ONMjs.observers.SelectedNamespaceComponentModelView failure: "+o}}return t}();Encapsule.code.lib.kohelpers.RegisterKnockoutViewTemplate("idKoTemplate_SelectedNamespaceComponentViewModel",function(){return'\n<span data-bind="if: extensionPointModelViewArray.length">\n    <div class="classONMjsSelectedNamespaceSectionTitle">\n        Component Extension Points (<span data-bind="text: extensionPointModelViewArray.length"></span>):\n    </div>\n    <span data-bind="ifnot: extensionPointModelViewArray.length"><i>Extension point contains no subcomponents.</i></span>\n    <span data-bind="if: extensionPointModelViewArray.length">\n    <div class="classONMjsSelectedNamespaceSectionCommon classONMjsSelectedNamespaceComponent">\n        <span data-bind="template: { name: \'idKoTemplate_AddressSelectionLinkViewModel\', foreach: extensionPointModelViewArray }"></span>\n    </div>\n    </span>\n</span>'});t=typeof Encapsule!=="undefined"&&Encapsule!==null&&Encapsule||(this.Encapsule={});Encapsule.code=Encapsule.code!=null&&Encapsule.code||(this.Encapsule.code={});Encapsule.code.lib=Encapsule.code.lib!=null&&Encapsule.code.lib||(this.Encapsule.code.lib={});Encapsule.code.lib.onm=Encapsule.code.lib.onm!=null&&Encapsule.code.lib.onm||(this.Encapsule.code.lib.onm={});e=Encapsule.code.lib.onm;e.observers=e.observers!=null&&e.observers||(e.observers={});e.observers.helpers=e.observers.helpers!=null&&e.observers.helpers||(e.observers.helpers={});e.observers.helpers.AddressSelectionLinkModelView=function(){function e(e,t,n,s,i,a){var o,r=this;try{this.backchannel=a!=null&&a||function(){throw"Missing backchannel input parameter."}();this.prefix=e!=null&&e||"";this.label=t!=null&&t||"<no label provided>";this.address=n!=null&&n&&n.clone()||function(){throw"Missing address input parameter."}();this.selectorStore=s!=null&&s||function(){throw"Missing selector store input parameter."}();o=i!=null&&i||{};this.optionsNoLink=o.noLink!=null&&o.noLink||false;this.onClick=function(){try{return r.selectorStore.setAddress(r.address)}catch(e){return r.backchannel.error("ONMjs.observers.helpers.AddressSelectionLinkModelView.onClick failure: "+e)}}}catch(l){throw"ONMjs.observers.helpers.AddressSelectionLinkModelView failure: "+l}}return e}();Encapsule.code.lib.kohelpers.RegisterKnockoutViewTemplate("idKoTemplate_AddressSelectionLinkViewModel",function(){return'<span data-bind="if: prefix"><span class="classONMjsAddressSelectionLinkPrefix" data-bind="html: prefix"></span></span><span data-bind="ifnot: optionsNoLink"><span class="classONMjsAddressSelectionLinkLabel classONMjsMouseOverPointer" data-bind="html: label, click: onClick"></span></span><span data-bind="if: optionsNoLink"><span class="classONMjsAddressSelectionLinkLabelNoLink" data-bind="html: label"></span></span>'});e.observers.helpers.CallbackLinkModelView=function(){function e(e,t,n,s,i,a,o){var r=this;try{this.backchannel=o!=null&&o||function(){throw"Missing backchannel input parameter."}();this.prefix=e!=null&&e||"";this.label=t!=null&&t||"<no label provided>";this.address=n!=null&&n.clone()||void 0;this.selectorStore=s!=null&&s||void 0;this.options=i!=null&&i||{};this.optionsNoLink=this.options.noLink!=null&&this.options.noLink||false;this.optionsStyleClass=this.options.styleClass!=null&&this.options.styleClass||void 0;this.callback=a;this.onClick=function(){try{if(!(r.callback!=null&&r.callback)){throw"Internal error: Did you construct this callback link with a valid callback function?"}return r.callback(r.prefix,r.label,r.address,r.selectorStore,r.options)}catch(e){return r.backchannel.error("ONMjs.observers.helpers.CallbackLinkModelView.onClick failure: "+e)}}}catch(l){throw"ONMjs.observers.helpers.CallbackLinkModelView failure: "+l}}return e}();Encapsule.code.lib.kohelpers.RegisterKnockoutViewTemplate("idKoTemplate_CallbackLinkViewModel",function(){return'<span class="classONMjsCallbackLink">\n    <span data-bind="if: prefix"><span class="prefix" data-bind="html: prefix"></span></span>\n    <span data-bind="ifnot: optionsNoLink">\n        <span class="link classONMjsMouseOverPointer" data-bind="html: label, click: onClick, css: optionsStyleClass"></span>\n    </span>\n    <span data-bind="if: optionsNoLink">\n        <span class="nolink" data-bind="html: label, css: optionsStyleClass"></span>\n    </span>\n</span>'});t=typeof Encapsule!=="undefined"&&Encapsule!==null&&Encapsule||(this.Encapsule={});Encapsule.code=Encapsule.code!=null&&Encapsule.code||(this.Encapsule.code={});Encapsule.code.lib=Encapsule.code.lib!=null&&Encapsule.code.lib||(this.Encapsule.code.lib={});Encapsule.code.lib.onm=Encapsule.code.lib.onm!=null&&Encapsule.code.lib.onm||(this.Encapsule.code.lib.onm={});e=Encapsule.code.lib.onm;e.observers=e.observers!=null&&e.observers||(e.observers={});e.observers.SelectedNamespaceImmutablePropertiesModelView=function(){function e(e){var t,n,s,i,a,o;try{this.backchannel=e.backchannel!=null&&e.backchannel||function(){throw"Missing backchannel input parameter."}();this.propertyModelViews=[];a=e.selectedAddress.getPropertiesModel();if(!(a!=null&&a)){throw"Cannot resolve namespace properties declaration for selection."}i=a.userImmutable!=null&&a.userImmutable||void 0;if(!(i!=null&&i)){return}t=e.selectedNamespace.data();for(s in i){n=i[s];o={immutable:true,declaration:{property:s,members:n},store:{value:t[s]}};this.propertyModelViews.push(o)}}catch(r){throw"ONMjs.observers.SelectedNamespaceImmutablePropertiesModelView failure: "+r}}return e}();Encapsule.code.lib.kohelpers.RegisterKnockoutViewTemplate("idKoTemplate_SelectedNamespaceImmutablePropertiesViewModel",function(){return'<div class="classONMjsSelectedNamespaceSectionTitle">\n    Immutable Properties (<span data-bind="text: propertyModelViews.length"></span>):\n</div>\n<div class="classONMjsSelectedNamespaceSectionCommon">\n    <span data-bind="if: propertyModelViews.length">\n        <div class="classONMjsSelectedNamespacePropertiesCommon classONMjsSelectedNamespacePropertiesImmutable">\n            <span data-bind="foreach: propertyModelViews">\n                <div class="name"><span class="immutable" data-bind="text: declaration.property"></span></div>\n                <div class="type" data-bind="text: declaration.members.____type"></div>\n                <div style="clear: both;" />\n                <span data-bind="if: declaration.members.____description">\n                    <div class="description" data-bind="text: declaration.members.____description"></div>\n                </span>\n                <div class="value"><span class="immutable" data-bind="text: store.value"></span></div>\n                <div style="clear: both;" />\n            </span>\n        </div>\n    </span>\n    <span data-bind="ifnot: propertyModelViews.length">\n        <i>This namespace has no immutable properties.</i>\n    </span>\n</div>'});e.observers.SelectedNamespaceMutablePropertiesModelView=function(){function t(t){var n,s,i,a,o,r,l,c=this;try{this.backchannel=t.backchannel!=null&&t.backchannel||function(){throw"Missing backchannel input parameter."}();this.propertyModelViews=[];this.namespace=t.selectedNamespace;o=t.selectedAddress.getPropertiesModel();if(!(o!=null&&o)){throw"Cannot resolve namespace properties declaration for selection."}a=o.userMutable!=null&&o.userMutable||void 0;if(!(a!=null&&a)){return}this.dataReference=t.selectedNamespace.data();this.onClickUpdateProperties=function(e,t,n,s,i){var a,o,r,l,d,p;try{a=false;p=c.propertyModelViews;for(l=0,d=p.length;l<d;l++){o=p[l];r=o.store.valueEdit();if(o.store.value!==r){c.dataReference[o.declaration.property]=r;a=true}}if(a){return c.namespace.update()}}catch(u){throw"ONMjs.observer.SelectedNamespaceMutablePropertiesModelView.onClickUpdateProperties failure: "+u}};n=t.selectedNamespaceModel.____label!=null&&t.selectedNamespaceModel.____label||"<no label defined>";this.updateLinkModelView=new e.observers.helpers.CallbackLinkModelView("","Apply "+n+" Edit",void 0,void 0,{styleClass:"classONMjsActionButtonConfirm"},this.onClickUpdateProperties,this.backchannel);this.onClickDiscardPropertyEdits=function(e,t,n,s,i){var a,o,r,l,d;try{l=c.propertyModelViews;d=[];for(o=0,r=l.length;o<r;o++){a=l[o];d.push(a.store.valueEdit(a.store.value))}return d}catch(p){throw"ONMjs.observer.SelectedNamespaceMutablePropertiesModelView.onClickDiscardPropertyEdits failure: "+p}};this.discardLinkModelView=new e.observers.helpers.CallbackLinkModelView("","Discard "+n+" Edits",void 0,void 0,{styleClass:"classONMjsActionButtonCancel"},this.onClickDiscardPropertyEdits,this.backchannel);for(i in a){s=a[i];r={immutable:false,declaration:{property:i,members:s},store:{value:this.dataReference[i],valueEdit:ko.observable(this.dataReference[i])},viewModelTemplate:void 0};l=s.____type!=null&&s.____type||"string";switch(l){case"enum":if(!(s.____options!=null&&s.____options&&s.____options.length!=null&&s.____options.length)){throw"Mutable property of type 'enum' must specify an options list via ____options array of string(s)."}r.viewModelTemplate="idKoTemplate_MutableSelectProperty";break;default:r.viewModelTemplate="idKoTemplate_MutableStringProperty";break}this.propertyModelViews.push(r)}this.propertiesUpdated=ko.computed(function(){var e,t,n,s,i;e=false;i=c.propertyModelViews;for(n=0,s=i.length;n<s;n++){r=i[n];t=r.store.valueEdit();if(r.store.value!==t){e=true}}return e})}catch(d){throw"ONMjs.observers.SelectedNamespaceMutablePropertiesModelView failure: "+d}}return t}();Encapsule.code.lib.kohelpers.RegisterKnockoutViewTemplate("idKoTemplate_MutableStringProperty",function(){return'<div type="text" class="value" contentEditable="true" data-bind="editableText: store.valueEdit"></div>'});Encapsule.code.lib.kohelpers.RegisterKnockoutViewTemplate("idKoTemplate_MutableSelectProperty",function(){return'<div class="select"><select data-bind="value: store.valueEdit, options: declaration.members.____options"></select></div>'});Encapsule.code.lib.kohelpers.RegisterKnockoutViewTemplate("idKoTemplate_SelectedNamespaceMutablePropertiesViewModel",function(){return'<div class="classONMjsSelectedNamespaceSectionTitle">\n    Mutable Properties (<span data-bind="text: propertyModelViews.length"></span>):\n</div>\n<div class="classONMjsSelectedNamespaceSectionCommon">\n    <span data-bind="if: propertyModelViews.length">\n        <div class="classONMjsSelectedNamespacePropertiesCommon classONMjsSelectedNamespacePropertiesMutable">\n            <span data-bind="foreach: propertyModelViews">\n                <div class="name" data-bind="text: declaration.property"></div>\n                <div class="type" data-bind="text: declaration.members.____type"></div>\n                <div style="clear: both;" />\n                <span data-bind="if: declaration.members.____description">\n                    <div class="description" data-bind="text: declaration.members.____description"></div>\n                </span>\n                <!-- <div type="text" class="value" contentEditable="true" data-bind="editableText: store.valueEdit"></div> -->\n                <span data-bind="template: { name: viewModelTemplate }"></span>\n            </span>\n            <span data-bind="if: propertiesUpdated">\n                <div class="buttons">\n                    <span data-bind="with: discardLinkModelView"><span data-bind="template: { name: \'idKoTemplate_CallbackLinkViewModel\' }"></span></span>\n                    <span data-bind="with: updateLinkModelView"><span data-bind="template: { name: \'idKoTemplate_CallbackLinkViewModel\' }"></span></span>\n                </div>\n            </span>\n        </div>\n    </span>\n    <span data-bind="ifnot: propertyModelViews.length">\n        <i>This namespace has no mutable properties.</i>\n    </span>\n</div>'});t=typeof Encapsule!=="undefined"&&Encapsule!==null&&Encapsule||(this.Encapsule={});Encapsule.code=Encapsule.code!=null&&Encapsule.code||(this.Encapsule.code={});Encapsule.code.lib=Encapsule.code.lib!=null&&Encapsule.code.lib||(this.Encapsule.code.lib={});Encapsule.code.lib.onm=Encapsule.code.lib.onm!=null&&Encapsule.code.lib.onm||(this.Encapsule.code.lib.onm={});e=Encapsule.code.lib.onm;e.observers=e.observers!=null&&e.observers||(e.observers={});e.observers.SelectedNamespaceTitleModelView=function(){function t(t){var n,s,i,a,o,r,l,c,d,p,u,h,m;try{this.backchannel=t.backchannel!=null&&t.backchannel||function(){throw"Missing backchannel input parameter."}();this.namespaceLabelResolved=t.selectedNamespace.getResolvedLabel();this.namespaceDescription=t.selectedNamespaceModel.____description!=null&&t.selectedNamespaceModel.____description||"<no description provided>";l=false;o=void 0;r=void 0;i=void 0;this.componentSuffixString=void 0;c=false;p=void 0;this.contextLinkModelViewComponent=void 0;this.contextLinkModelViewExtensionPoint=void 0;n=void 0;s=void 0;d=void 0;m=t.selectedAddress.getModel().namespaceType;if(!(m==="root")){l=true;if(t.selectedNamespaceModel.namespaceType!=="component"){n=t.selectedAddress.createComponentAddress()}else{d=t.selectedAddress.createParentAddress();n=d.createComponentAddress()}a=t.objectStore.openNamespace(n);i=a.getResolvedLabel();this.componentSuffixString=n.getModel().namespaceType!=="root"&&":"||"::";this.componentClickableLink=new e.observers.helpers.AddressSelectionLinkModelView("",i,n,t.cachedAddressStore,void 0,this.backchannel)}if(m==="component"){c=true;if(!(d!=null&&d)){d=t.selectedAddress.createParentAddress()}u=d.getModel();h=u.____label!=null&&u.____label||"<no label defined>";this.extensionPointClickableLink=new e.observers.helpers.AddressSelectionLinkModelView("",h,d,t.cachedAddressStore,void 0,this.backchannel)}this.templateName=void 0;if(!l){this.templateName="idKoTemplate_SelectedNamespaceTitleRootViewModel"}else if(!c){this.templateName="idKoTemplate_SelectedNamespaceTitleExtensionPointViewModel"}else{this.templateName="idKoTemplate_SelectedNamespaceTitleComponentViewModel"}}catch(b){throw"ONMjs.observers.ObjectModelNavigatorNamespaceTitle failure: "+b}}return t}();Encapsule.code.lib.kohelpers.RegisterKnockoutViewTemplate("idKoTemplate_SelectedNamespaceTitleRootViewModel",function(){return'<span class="selected" data-bind="html: namespaceLabelResolved"></span>'});Encapsule.code.lib.kohelpers.RegisterKnockoutViewTemplate("idKoTemplate_SelectedNamespaceTitleExtensionPointViewModel",function(){return'<span data-bind="with: componentClickableLink"><span data-bind="template: { name: \'idKoTemplate_AddressSelectionLinkViewModel\' }"></span></span>\n<span class="separator" data-bind="html: componentSuffixString"></span>\n<span class="selected" data-bind="html: namespaceLabelResolved"></span>'});Encapsule.code.lib.kohelpers.RegisterKnockoutViewTemplate("idKoTemplate_SelectedNamespaceTitleComponentViewModel",function(){return'<span data-bind="with: componentClickableLink"><span data-bind="template: { name: \'idKoTemplate_AddressSelectionLinkViewModel\' }"></span></span>\n<span class="separator" data-bind="html: componentSuffixString"></span>\n<span data-bind="with: extensionPointClickableLink"><span data-bind="template: { name: \'idKoTemplate_AddressSelectionLinkViewModel\' }"></span></span>\n<span class="separator"> / </span>\n<span class="selected" data-bind="html: namespaceLabelResolved"></span>'});Encapsule.code.lib.kohelpers.RegisterKnockoutViewTemplate("idKoTemplate_SelectedNamespaceTitleViewModel",function(){return'<div class="classONMjsSelectedNamespaceTitle">\n    <span class="classONMjsSelectedNamespaceTitleLinks" data-bind="template: { name: function () { return templateName; } }" ></span>\n    <div class="description" data-bind="html: namespaceDescription"></div>\n</div>'})}).call(this)})();